<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>ch06 | My Nikola Site</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="https://example.com/posts/books/python_cookbook/ch06/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Nikola Tesla">
<meta property="og:site_name" content="My Nikola Site">
<meta property="og:title" content="ch06">
<meta property="og:url" content="https://example.com/posts/books/python_cookbook/ch06/">
<meta property="og:description" content="6. 데이터 인코딩과 프로세싱¶
start: 2014-10-07
end: 2014-10


CSV, JSON, XML, 바이너리 레코드 등으로 표현된 데이터를 다루는 방법을 알아봄
특정 알고리즘이 아닌 프로그램에 데이터를 넣고 빼는 방법에 집중










6.1 CSV 데이터 읽고 쓰기¶문제¶
CSV 파일로 인코딩된 데이터를 읽거나 쓰고 싶다.

해">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-06-15T19:51:40-09:00">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://getnikola.com" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/getnikola" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/getnikola" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">ch06</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2016-06-15T19:51:40-09:00">2016-06-15 19:51</time>
            
                      |  
        <a href="index.ipynb" id="sourcelink">Source</a>

            </div>
            
        </div>
        <div class="body">
            <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="6.-데이터-인코딩과-프로세싱">6. 데이터 인코딩과 프로세싱<a class="anchor-link" href="#6.-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%B8%EC%BD%94%EB%94%A9%EA%B3%BC-%ED%94%84%EB%A1%9C%EC%84%B8%EC%8B%B1">¶</a>
</h2>
<ul>
<li>start: 2014-10-07</li>
<li>end: 2014-10</li>
</ul>
<ul>
<li>CSV, JSON, XML, 바이너리 레코드 등으로 표현된 데이터를 다루는 방법을 알아봄</li>
<li>특정 알고리즘이 아닌 프로그램에 데이터를 넣고 빼는 방법에 집중</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.1-CSV-데이터-읽고-쓰기">6.1 CSV 데이터 읽고 쓰기<a class="anchor-link" href="#6.1-CSV-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EA%B3%A0-%EC%93%B0%EA%B8%B0">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>CSV 파일로 인코딩된 데이터를 읽거나 쓰고 싶다.</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>대부분의 CSV 데이터는 csv 라이브러리를 사용</li>
<li>shocks.csv 파일에 담겨있는 주식 시장 정보가 있다고 가정</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/reading_and_writing_csv_data/stocks.csv
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Symbol,Price,Date,Time,Change,Volume
"AA",39.48,"6/11/2007","9:36am",-0.18,181800
"AIG",71.38,"6/11/2007","9:36am",-0.15,195500
"AXP",62.58,"6/11/2007","9:36am",-0.46,935000
"BA",98.31,"6/11/2007","9:36am",+0.12,104800
"C",53.08,"6/11/2007","9:36am",-0.25,360900
"CAT",78.29,"6/11/2007","9:36am",-0.23,225400
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>['Symbol', 'Price', 'Date', 'Time', 'Change', 'Volume']
['AA', '39.48', '6/11/2007', '9:36am', '-0.18', '181800']
['AIG', '71.38', '6/11/2007', '9:36am', '-0.15', '195500']
['AXP', '62.58', '6/11/2007', '9:36am', '-0.46', '935000']
['BA', '98.31', '6/11/2007', '9:36am', '+0.12', '104800']
['C', '53.08', '6/11/2007', '9:36am', '-0.25', '360900']
['CAT', '78.29', '6/11/2007', '9:36am', '-0.23', '225400']
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul><li>
</li></ul>
<p>앞에 나온 코드에서 row는 튜플이 됨</p>
<ul>
<li>따라서 특정 필드에 접근하려면 row[0](Symbol), row[4](Change)와 같이 인덱스를 사용해야 함</li>
</ul>
<ul>
<li>인덱스 사용이 떄때로 헷갈리기 때문에 named tuple을 고려</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">namedtuple</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">headings</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)</span>
    <span class="n">Row</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'Row'</span><span class="p">,</span> <span class="n">headings</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Row</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">Row</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>&lt;class '__main__.Row'&gt;
Row(Symbol='CAT', Price='78.29', Date='6/11/2007', Time='9:36am', Change='-0.23', Volume='225400')
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">namedtuple</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">headings</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)</span>
    <span class="n">Row</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'Row'</span><span class="p">,</span> <span class="n">headings</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">Row</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="o">.</span><span class="n">Symbol</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">Price</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">Date</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Row(Symbol='AA', Price='39.48', Date='6/11/2007', Time='9:36am', Change='-0.18', Volume='181800')
AA 39.48 6/11/2007

Row(Symbol='AIG', Price='71.38', Date='6/11/2007', Time='9:36am', Change='-0.15', Volume='195500')
AIG 71.38 6/11/2007

Row(Symbol='AXP', Price='62.58', Date='6/11/2007', Time='9:36am', Change='-0.46', Volume='935000')
AXP 62.58 6/11/2007

Row(Symbol='BA', Price='98.31', Date='6/11/2007', Time='9:36am', Change='+0.12', Volume='104800')
BA 98.31 6/11/2007

Row(Symbol='C', Price='53.08', Date='6/11/2007', Time='9:36am', Change='-0.25', Volume='360900')
C 53.08 6/11/2007

Row(Symbol='CAT', Price='78.29', Date='6/11/2007', Time='9:36am', Change='-0.23', Volume='225400')
CAT 78.29 6/11/2007

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이렇게 하면 row.Symbol 이나 row.Change와 같이 열 헤더를 사용할 수 있음</li>
<li>다만 열 헤더가 유효한 파이썬 식별자여야 한다.</li>
<li>그렇지 않으면 initial heading에 메시지를 보내서 식별자가 아닌 문자를 밑줄이나 유사한 것으로 변경해야 할지도 모름</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="c1"># Dictionary Reader</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{'Date': '6/11/2007', 'Change': '-0.18', 'Volume': '181800', 'Price': '39.48', 'Symbol': 'AA', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': '-0.15', 'Volume': '195500', 'Price': '71.38', 'Symbol': 'AIG', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': '-0.46', 'Volume': '935000', 'Price': '62.58', 'Symbol': 'AXP', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': '+0.12', 'Volume': '104800', 'Price': '98.31', 'Symbol': 'BA', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': '-0.25', 'Volume': '360900', 'Price': '53.08', 'Symbol': 'C', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': '-0.23', 'Volume': '225400', 'Price': '78.29', 'Symbol': 'CAT', 'Time': '9:36am'}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이 버전의 경우, 각 행의 요소에 접근하기 위해서 행 헤더를 사용함</li>
<li>예를 들어 row['Symbol'] 또는 row['Change'] 등과 같이 함</li>
<li>CSV 데이터를 쓰려면, csv 모듈을 사용해서 쓰기 객체를 생성함</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Symbol'</span><span class="p">,</span> <span class="s1">'Price'</span><span class="p">,</span> <span class="s1">'Date'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">(</span><span class="s1">'AA'</span><span class="p">,</span> <span class="s1">'39.48'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'-0.18'</span><span class="p">,</span> <span class="s1">'181800'</span><span class="p">),</span>
<span class="p">(</span><span class="s1">'AIG'</span><span class="p">,</span> <span class="s1">'71.38'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'-0.15'</span><span class="p">,</span> <span class="s1">'195500'</span><span class="p">),</span>
<span class="p">(</span><span class="s1">'AXP'</span><span class="p">,</span> <span class="s1">'62.58'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'-0.46'</span><span class="p">,</span> <span class="s1">'935000'</span><span class="p">),</span>
<span class="p">(</span><span class="s1">'BA'</span><span class="p">,</span> <span class="s1">'98.31'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'+0.12'</span><span class="p">,</span> <span class="s1">'104800'</span><span class="p">),</span>
<span class="p">(</span><span class="s1">'C'</span><span class="p">,</span> <span class="s1">'53.08'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'-0.25'</span><span class="p">,</span> <span class="s1">'360900'</span><span class="p">),</span>
<span class="p">(</span><span class="s1">'CAT'</span><span class="p">,</span> <span class="s1">'78.29'</span><span class="p">,</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'9:36am'</span><span class="p">,</span> <span class="s1">'-0.23'</span><span class="p">,</span> <span class="s1">'225400'</span><span class="p">),</span>
<span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks_mytuple.csv'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">f_csv</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>
    <span class="n">f_csv</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/reading_and_writing_csv_data/stocks_mytuple.csv
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>






</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rows</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'-0.18'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'181800'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'39.48'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'AA'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">},</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'-0.15'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'195500'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'71.38'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'AIG'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">},</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'-0.46'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'935000'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'62.58'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'AXP'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">},</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'+0.12'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'104800'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'98.31'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'BA'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">},</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'-0.25'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'360900'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'53.08'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'C'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">},</span>
<span class="p">{</span><span class="s1">'Date'</span><span class="p">:</span> <span class="s1">'6/11/2007'</span><span class="p">,</span> <span class="s1">'Change'</span><span class="p">:</span> <span class="s1">'-0.23'</span><span class="p">,</span> <span class="s1">'Volume'</span><span class="p">:</span> <span class="s1">'225400'</span><span class="p">,</span> 
 <span class="s1">'Price'</span><span class="p">:</span> <span class="s1">'78.29'</span><span class="p">,</span> <span class="s1">'Symbol'</span><span class="p">:</span> <span class="s1">'CAT'</span><span class="p">,</span> <span class="s1">'Time'</span><span class="p">:</span> <span class="s1">'9:36am'</span><span class="p">}]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks_mydict.csv'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictWriter</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">headers</span><span class="p">)</span>
    <span class="n">f_csv</span><span class="o">.</span><span class="n">writeheader</span><span class="p">()</span>
    <span class="n">f_csv</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [31]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/reading_and_writing_csv_data/stocks_mydict.csv
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>






</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>csv 데이터를 수동으로 다루는 프로그램을 작성하기보다는 csv 모듈을 사용하는 것이 훨씬 나은 선택</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [33]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 이렇게 하면 프로그래머가 일일이 처리해야 할 점이 많아진다.</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">','</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>['Symbol', 'Price', 'Date', 'Time', 'Change', 'Volume\n']
['"AA"', '39.48', '"6/11/2007"', '"9:36am"', '-0.18', '181800\n']
['"AIG"', '71.38', '"6/11/2007"', '"9:36am"', '-0.15', '195500\n']
['"AXP"', '62.58', '"6/11/2007"', '"9:36am"', '-0.46', '935000\n']
['"BA"', '98.31', '"6/11/2007"', '"9:36am"', '+0.12', '104800\n']
['"C"', '53.08', '"6/11/2007"', '"9:36am"', '-0.25', '360900\n']
['"CAT"', '78.29', '"6/11/2007"', '"9:36am"', '-0.23', '225400\n']
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>예를 들어 필드가 따옴표로 둘러싸인 경우 이 따옴표를 잘라내야 한다.</li>
<li>또한 인용 필드에 쉼표가 있으면 행 크기를 잘못 인식해서 코드가 망가짐</li>
<li>기본적으로 csv 라이브러리는 Microsoft Excel 에서 사용하는 CSV 인코딩 규칙을 이해하도록 프로그램되어 있다.</li>
<li>이 방식이 가장 일반적이고 이식성도 가장 좋다. 하지만 csv의 문서를 보면 인코딩을 다른 형식으로 바꾸는 방법(구분자를 다른 문자로 바꾸는 등)이 나와 있음</li>
<li>예를 들어 탭으로 나누어진 데이터를 읽고 싶으면 다음과 같이 함</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [36]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/reading_and_writing_csv_data/stocks.tsv
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Symbol	Price	Date	Time	Change	Volume
"AA"	39.48	"6/11/2007"	"9:36am"	-0.18	181800
"AIG"	71.38	"6/11/2007"	"9:36am"	-0.15	195500
"AXP"	62.58	"6/11/2007"	"9:36am"	-0.46	935000
"BA"	98.31	"6/11/2007"	"9:36am"	+0.12	104800
"C"	53.08	"6/11/2007"	"9:36am"	-0.25	360900
"CAT"	78.29	"6/11/2007"	"9:36am"	-0.23	225400
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [35]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 탭으로 구분한 값 읽기 예제</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.tsv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_tsv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">'</span><span class="se">\t</span><span class="s1">'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f_tsv</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>['Symbol', 'Price', 'Date', 'Time', 'Change', 'Volume']
['AA', '39.48', '6/11/2007', '9:36am', '-0.18', '181800']
['AIG', '71.38', '6/11/2007', '9:36am', '-0.15', '195500']
['AXP', '62.58', '6/11/2007', '9:36am', '-0.46', '935000']
['BA', '98.31', '6/11/2007', '9:36am', '+0.12', '104800']
['C', '53.08', '6/11/2007', '9:36am', '-0.25', '360900']
['CAT', '78.29', '6/11/2007', '9:36am', '-0.23', '225400']
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>CSV 데이터를 읽고 네임드 튜플로 변환한다면 열 헤더를 검증할 때 주의해야 함</li>
<li>예를 들어 CSV 파일에 다음과 같이 유효하지 않은 식별 문자가 들어 있을 수 있음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [37]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%</span><span class="k">writefile</span> 06/reading_and_writing_csv_data/stocks_re.csv
Street Address, Num-Premises, Latitude, Longitude
5412 N CLARK, 10, 41.980262, -87.668452
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Writing 06/reading_and_writing_csv_data/stocks_re.csv
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>실제로 앞에 나온 데이터로 namedtuple을 만들 때 ValueError 예외가 발생함</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">namedtuple</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks_re.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">headings</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)</span>
    <span class="n">Row</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'Row'</span><span class="p">,</span> <span class="n">headings</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">Row</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-41-1421d40babee&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">      3</span>     f_csv <span class="ansi-blue-fg">=</span> csv<span class="ansi-blue-fg">.</span>reader<span class="ansi-blue-fg">(</span>f<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      4</span>     headings <span class="ansi-blue-fg">=</span> next<span class="ansi-blue-fg">(</span>f_csv<span class="ansi-blue-fg">)</span>
<span class="ansi-green-fg">----&gt; 5</span><span class="ansi-red-fg">     </span>Row <span class="ansi-blue-fg">=</span> namedtuple<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">'Row'</span><span class="ansi-blue-fg">,</span> headings<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">      6</span>     <span class="ansi-green-fg">for</span> r <span class="ansi-green-fg">in</span> f_csv<span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">      7</span>         row <span class="ansi-blue-fg">=</span> Row<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>r<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/Users/re4lfl0w/virtualenv/python3_test/lib/python3.4/collections/__init__.py</span> in <span class="ansi-cyan-fg">namedtuple</span><span class="ansi-blue-fg">(typename, field_names, verbose, rename)</span>
<span class="ansi-green-intense-fg ansi-bold">    336</span>         <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> name<span class="ansi-blue-fg">.</span>isidentifier<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    337</span>             raise ValueError('Type names and field names must be valid '
<span class="ansi-green-fg">--&gt; 338</span><span class="ansi-red-fg">                              'identifiers: %r' % name)
</span><span class="ansi-green-intense-fg ansi-bold">    339</span>         <span class="ansi-green-fg">if</span> _iskeyword<span class="ansi-blue-fg">(</span>name<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    340</span>             raise ValueError('Type names and field names cannot be a '

<span class="ansi-red-fg">ValueError</span>: Type names and field names must be valid identifiers: 'Street Address'</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">

<pre><code>---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-41-1421d40babee&gt; in &lt;module&gt;()
      3     f_csv = csv.reader(f)
      4     headings = next(f_csv)
----&gt; 5     Row = namedtuple('Row', headings)
      6     for r in f_csv:
      7         row = Row(*r)

/Users/re4lfl0w/virtualenv/python3_test/lib/python3.4/collections/__init__.py in namedtuple(typename, field_names, verbose, rename)
    336         if not name.isidentifier():
    337             raise ValueError('Type names and field names must be valid '
--&gt; 338                              'identifiers: %r' % name)
    339         if _iskeyword(name):
    340             raise ValueError('Type names and field names cannot be a '

ValueError: Type names and field names must be valid identifiers: 'Street Address'</code></pre>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [65]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">namedtuple</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on function namedtuple in module collections:

namedtuple(typename, field_names, verbose=False, rename=False)
    Returns a new subclass of tuple with named fields.
    
    &gt;&gt;&gt; Point = namedtuple('Point', ['x', 'y'])
    &gt;&gt;&gt; Point.__doc__                   # docstring for the new class
    'Point(x, y)'
    &gt;&gt;&gt; p = Point(11, y=22)             # instantiate with positional args or keywords
    &gt;&gt;&gt; p[0] + p[1]                     # indexable like a plain tuple
    33
    &gt;&gt;&gt; x, y = p                        # unpack like a regular tuple
    &gt;&gt;&gt; x, y
    (11, 22)
    &gt;&gt;&gt; p.x + p.y                       # fields also accessable by name
    33
    &gt;&gt;&gt; d = p._asdict()                 # convert to a dictionary
    &gt;&gt;&gt; d['x']
    11
    &gt;&gt;&gt; Point(**d)                      # convert from a dictionary
    Point(x=11, y=22)
    &gt;&gt;&gt; p._replace(x=100)               # _replace() is like str.replace() but targets named fields
    Point(x=100, y=22)

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [71]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">namedtuple</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks_re.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="c1"># h.strip()을 해준 상태로 정규표현식 적용이 되야 공백이 _로 바뀌지 않는다.</span>
    <span class="c1"># 책에는 공백이 없이 나왔는데 내가 임의로 넣어서 그렇네.</span>
    <span class="n">headings</span> <span class="o">=</span> <span class="p">[</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">'[^a-zA-Z_]'</span><span class="p">,</span> <span class="s1">'_'</span><span class="p">,</span> <span class="n">h</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)]</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">headings</span><span class="p">)</span>
    <span class="n">Row</span> <span class="o">=</span> <span class="n">namedtuple</span><span class="p">(</span><span class="s1">'Row112'</span><span class="p">,</span> <span class="n">headings</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">r</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">r</span><span class="p">):</span>
            <span class="n">r</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">row</span> <span class="o">=</span> <span class="n">Row</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">''</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>['Street_Address', 'Num_Premises', 'Latitude', 'Longitude']
['5412 N CLARK', ' 10', ' 41.980262', ' -87.668452']
Row112(Street_Address='5412 N CLARK', Num_Premises='10', Latitude='41.980262', Longitude='-87.668452')

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [76]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [79]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [85]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 원소 하나씩 각 자리에 매칭</span>
<span class="c1"># 0, 1, 2, 3, 4</span>
<span class="n">test</span><span class="p">(</span><span class="o">*</span><span class="n">l</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[85]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>10</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-86-7fe4e9895749&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>test<span class="ansi-blue-fg">(</span>l<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">&lt;ipython-input-79-dec58629daf7&gt;</span> in <span class="ansi-cyan-fg">test</span><span class="ansi-blue-fg">(*args)</span>
<span class="ansi-green-intense-fg ansi-bold">      1</span> <span class="ansi-green-fg">def</span> test<span class="ansi-blue-fg">(</span><span class="ansi-blue-fg">*</span>args<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-fg">----&gt; 2</span><span class="ansi-red-fg">     </span><span class="ansi-green-fg">return</span> sum<span class="ansi-blue-fg">(</span>args<span class="ansi-blue-fg">)</span>

<span class="ansi-red-fg">TypeError</span>: unsupported operand type(s) for +: 'int' and 'range'</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>또한 csv는 데이터를 해석하려 하거나 문자열이 아닌 형식으로 변환하려 하지 않는다는 점이 중요</li>
<li>그런 변환이 중요하다면 프로그래머가 스스로 해야함</li>
<li>CSV 데이터에 대해서 추가적인 형식 변환을 하는 예제</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [56]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">col_types</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">int</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f_csv</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">f_csv</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">f_csv</span><span class="p">:</span>
        <span class="c1"># 행 아이템에 변환 적용</span>
        <span class="n">row</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">convert</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">convert</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">col_types</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>('AA', 39.48, '6/11/2007', '9:36am', -0.18, 181800)
('AIG', 71.38, '6/11/2007', '9:36am', -0.15, 195500)
('AXP', 62.58, '6/11/2007', '9:36am', -0.46, 935000)
('BA', 98.31, '6/11/2007', '9:36am', 0.12, 104800)
('C', 53.08, '6/11/2007', '9:36am', -0.25, 360900)
('CAT', 78.29, '6/11/2007', '9:36am', -0.23, 225400)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>딕셔너리에서 선택한 필드만 변환하는 예제</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'Reading as dicts with type conversion'</span><span class="p">)</span>
<span class="n">field_types</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">'Price'</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
               <span class="p">(</span><span class="s1">'Change'</span><span class="p">,</span> <span class="nb">float</span><span class="p">),</span>
               <span class="p">(</span><span class="s1">'Volume'</span><span class="p">,</span> <span class="nb">int</span><span class="p">)]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Reading as dicts with type conversion
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [88]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/reading_and_writing_csv_data/stocks.csv'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csv</span><span class="o">.</span><span class="n">DictReader</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="n">row</span><span class="o">.</span><span class="n">update</span><span class="p">((</span><span class="n">key</span><span class="p">,</span> <span class="n">conversion</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
                   <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">conversion</span> <span class="ow">in</span> <span class="n">field_types</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{'Date': '6/11/2007', 'Change': -0.18, 'Volume': 181800, 'Price': 39.48, 'Symbol': 'AA', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': -0.15, 'Volume': 195500, 'Price': 71.38, 'Symbol': 'AIG', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': -0.46, 'Volume': 935000, 'Price': 62.58, 'Symbol': 'AXP', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': 0.12, 'Volume': 104800, 'Price': 98.31, 'Symbol': 'BA', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': -0.25, 'Volume': 360900, 'Price': 53.08, 'Symbol': 'C', 'Time': '9:36am'}
{'Date': '6/11/2007', 'Change': -0.23, 'Volume': 225400, 'Price': 78.29, 'Symbol': 'CAT', 'Time': '9:36am'}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이런 변환을 할 때는 주의를 기울여야 함</li>
<li>실제 프로그램을 작성할 때 CSV 파일에 값이 빠지거나 데이터가 망가져 있는 등 <strong>타입 변환에서 문제가 될 만한 이슈</strong>가 많다.</li>
<li>따라서 데이터에 에러가 없다고 보장하지 않는 이상은 항상 이 부분을 고려해야 한다.(<strong>적절한 예외처리 코드</strong>를 넣는 것이 좋다.)</li>
<li>마지막으로, CSV 데이터를 읽어 데이터 분석이나 통계에 활용하려는 경우 pandas 패키지 사용 고려</li>
<li>pandas의 pandas.read_csv() 함수르 사용하면 CSV 데이터를 DataFrame 객체에 불러올 수 있음</li>
<li>그 후에 데이터를 걸러내거나 통계 요약을 보는 등 상위 레벨 작업을 수행할 수 있음. 예제는 레시피 6.13 참고</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.2-JSON-데이터-읽고-쓰기">6.2 JSON 데이터 읽고 쓰기<a class="anchor-link" href="#6.2-JSON-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BD%EA%B3%A0-%EC%93%B0%EA%B8%B0">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>JSON(JavaScript Object Notation)으로 인코딩된 데이터를 읽거나 쓰고 싶다.</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>JSON으로 데이터를 인코딩, 디코딩하는 쉬운 방법은 json 모듈을 사용하는 것</li>
<li>주요 함수는 json.dumps()와 json.loads()이고, pickle과 같은 직렬화 라이브러리에서 사용한 것과 인터페이스는 동일</li>
<li>파이썬 데이터를 JSON으로 변환하는 코드를 보자</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [89]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">'name'</span><span class="p">:</span> <span class="s1">'ACME'</span><span class="p">,</span>
<span class="s1">'shares'</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
<span class="s1">'price'</span><span class="p">:</span> <span class="mf">542.23</span>
<span class="p">}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>다음은 JSON 인코딩된 문자열을 파이썬 자료 구조로 돌리는 방법</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [91]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">json_str</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">json_str</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[91]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'{"name": "ACME", "shares": 100, "price": 542.23}'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>문자열이 아닌 파일로 작업한다면 json.dump()와 json.load()를 사용해서 JSON 데이터를 인코딩/디코딩 한다.</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [92]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># JSON 데이터 쓰기</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/data.json'</span><span class="p">,</span> <span class="s1">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [93]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/data.json
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{"name": "ACME", "shares": 100, "price": 542.23}</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [94]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 데이터 다시 읽기</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/data.json'</span><span class="p">,</span> <span class="s1">'r'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[94]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>{'name': 'ACME', 'shares': 100, 'price': 542.23}</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>JSON 인코딩은 None, bool, int, float, str과 같은 기본 타입과 함께 리스트, 튜플, 딕셔너리와 같은 컨테이너 타입을 지원</li>
<li>딕셔너리의 경우 키는 문자열로 가정(문자열이 아닌 키는 인코딩 과정에서 문자열로 변환됨)</li>
<li>JSON 스펙을 따르기 위해서 파이썬 리스트와 딕셔너리만 인코딩해야 함</li>
<li>웹 애플리케이션의 경우에는 상위 레벨 객체는 딕셔너리로 하는 것이 표준</li>
<li>JSON 인코딩 포맷은 약간의 차이점을 제외하고는 파이썬 문법과 거의 동일</li>
<li>True는 true로 False는 false로 None은 null로 매핑됨</li>
<li>어떤 식으로 인코딩되는지 다음 코드를 참고</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [95]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[95]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'false'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [96]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">d</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'a'</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
     <span class="s1">'b'</span><span class="p">:</span> <span class="s1">'Hello'</span><span class="p">,</span>
     <span class="s1">'c'</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [97]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[97]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'{"c": null, "a": true, "b": "Hello"}'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>JSON에서 디코딩한 데이터를 조사해야 한다면, 단순히 출력해서 구조를 알아내기는 쉽지 않음</li>
<li>특히 데이터에 중첩이 심하게 된 구조체가 포함되어 있거나 필드가 많다면 더 어렵다</li>
<li>pprint 모듈의 pprint() 함수를 사용해 보자</li>
<li>이 함수는 키를 알파벳 순으로 나열하고 딕셔너리를 좀 더 보기 좋게 출력함</li>
<li>다음 코드를 통해 트위터의 검색 결과를 더 예쁘게 출력하는 방법을 보자</li>
<li>pprint 사용하면 됨</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>일반적으로 JSON 디코딩은 제공받은 데이터로부터 딕셔너리나 리스트를 생성</li>
<li>다른 종류의 객체를 만들고 싶다면 json.loads()에 object pairs hook나 object hook를 넣음</li>
<li>OrderedDict의 순서를 지키면서 JSON 데이터를 디코딩하려면?</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [109]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># JSON은 "만 큰따옴표로 인식한다.</span>
<span class="c1"># string이다. </span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">'{"name": "ACME", "shares": 50, "price": 490.1}'</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [110]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="k">import</span> <span class="n">OrderedDict</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [111]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[111]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'{"name": "ACME", "shares": 50, "price": 490.1}'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [113]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[113]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>OrderedDict([('name', 'ACME'), ('shares', 50), ('price', 490.1)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>다음은 JSON 딕셔너리를 파이썬 객체로 바꾸는 예시</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [114]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">JSONObject</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">d</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__dict__</span> <span class="o">=</span> <span class="n">d</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [117]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">JSONObject</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[117]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;__main__.JSONObject at 0x10c73bf60&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [118]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">name</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[118]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'ACME'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [119]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">shares</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[119]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>50</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [120]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">price</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[120]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>490.1</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>마지막 예제에서, JSON 데이터를 디코딩하여 생성한 딕셔너리를 __init__()에 인자로 전달</li>
<li>여기부터는 객체의 딕셔너리 인스턴스인 것처럼 자유롭게 사용해도 좋음</li>
<li>JSON을 인코딩할 때 유용한 옵션</li>
<li>출력을 더 보기 좋게 하려면 json.dumps()에 indent 인자를 사용</li>
<li>그렇게 하면 pprint() 함수를 사용한 것처럼 보기 좋게 들여쓰기 됨</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [122]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">object_pairs_hook</span><span class="o">=</span><span class="n">OrderedDict</span><span class="p">)</span>
<span class="n">data</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[122]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>OrderedDict([('name', 'ACME'), ('shares', 50), ('price', 490.1)])</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [123]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{"name": "ACME", "shares": 50, "price": 490.1}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [124]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{
    "name": "ACME",
    "shares": 50,
    "price": 490.1
}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>출력에서 키를 정렬하고 싶다면 sort_keys 인자 사용</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [126]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{"name": "ACME", "price": 490.1, "shares": 50}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [128]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>{
    "name": "ACME",
    "price": 490.1,
    "shares": 50
}
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>인스턴스는 일반적으로 JSON으로 직렬화하지 않음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [171]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [172]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [173]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">TypeError</span>                                 Traceback (most recent call last)
<span class="ansi-green-fg">&lt;ipython-input-173-d449655131f5&gt;</span> in <span class="ansi-cyan-fg">&lt;module&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-fg">----&gt; 1</span><span class="ansi-red-fg"> </span>json<span class="ansi-blue-fg">.</span>dumps<span class="ansi-blue-fg">(</span>p<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/Cellar/python3/3.4.1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/json/__init__.py</span> in <span class="ansi-cyan-fg">dumps</span><span class="ansi-blue-fg">(obj, skipkeys, ensure_ascii, check_circular, allow_nan, cls, indent, separators, default, sort_keys, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    228</span>         cls <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span> indent <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span> separators <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span> <span class="ansi-green-fg">and</span>
<span class="ansi-green-intense-fg ansi-bold">    229</span>         default is None and not sort_keys and not kw):
<span class="ansi-green-fg">--&gt; 230</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> _default_encoder<span class="ansi-blue-fg">.</span>encode<span class="ansi-blue-fg">(</span>obj<span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    231</span>     <span class="ansi-green-fg">if</span> cls <span class="ansi-green-fg">is</span> <span class="ansi-green-fg">None</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    232</span>         cls <span class="ansi-blue-fg">=</span> JSONEncoder

<span class="ansi-green-fg">/usr/local/Cellar/python3/3.4.1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/json/encoder.py</span> in <span class="ansi-cyan-fg">encode</span><span class="ansi-blue-fg">(self, o)</span>
<span class="ansi-green-intense-fg ansi-bold">    190</span>         <span class="ansi-red-fg"># exceptions aren't as detailed.  The list call should be roughly</span>
<span class="ansi-green-intense-fg ansi-bold">    191</span>         <span class="ansi-red-fg"># equivalent to the PySequence_Fast that ''.join() would do.</span>
<span class="ansi-green-fg">--&gt; 192</span><span class="ansi-red-fg">         </span>chunks <span class="ansi-blue-fg">=</span> self<span class="ansi-blue-fg">.</span>iterencode<span class="ansi-blue-fg">(</span>o<span class="ansi-blue-fg">,</span> _one_shot<span class="ansi-blue-fg">=</span><span class="ansi-green-fg">True</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    193</span>         <span class="ansi-green-fg">if</span> <span class="ansi-green-fg">not</span> isinstance<span class="ansi-blue-fg">(</span>chunks<span class="ansi-blue-fg">,</span> <span class="ansi-blue-fg">(</span>list<span class="ansi-blue-fg">,</span> tuple<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>
<span class="ansi-green-intense-fg ansi-bold">    194</span>             chunks <span class="ansi-blue-fg">=</span> list<span class="ansi-blue-fg">(</span>chunks<span class="ansi-blue-fg">)</span>

<span class="ansi-green-fg">/usr/local/Cellar/python3/3.4.1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/json/encoder.py</span> in <span class="ansi-cyan-fg">iterencode</span><span class="ansi-blue-fg">(self, o, _one_shot)</span>
<span class="ansi-green-intense-fg ansi-bold">    248</span>                 self<span class="ansi-blue-fg">.</span>key_separator<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>item_separator<span class="ansi-blue-fg">,</span> self<span class="ansi-blue-fg">.</span>sort_keys<span class="ansi-blue-fg">,</span>
<span class="ansi-green-intense-fg ansi-bold">    249</span>                 self.skipkeys, _one_shot)
<span class="ansi-green-fg">--&gt; 250</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">return</span> _iterencode<span class="ansi-blue-fg">(</span>o<span class="ansi-blue-fg">,</span> <span class="ansi-cyan-fg">0</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    251</span> 
<span class="ansi-green-intense-fg ansi-bold">    252</span> def _make_iterencode(markers, _default, _encoder, _indent, _floatstr,

<span class="ansi-green-fg">/usr/local/Cellar/python3/3.4.1/Frameworks/Python.framework/Versions/3.4/lib/python3.4/json/encoder.py</span> in <span class="ansi-cyan-fg">default</span><span class="ansi-blue-fg">(self, o)</span>
<span class="ansi-green-intense-fg ansi-bold">    171</span> 
<span class="ansi-green-intense-fg ansi-bold">    172</span>         """
<span class="ansi-green-fg">--&gt; 173</span><span class="ansi-red-fg">         </span><span class="ansi-green-fg">raise</span> TypeError<span class="ansi-blue-fg">(</span>repr<span class="ansi-blue-fg">(</span>o<span class="ansi-blue-fg">)</span> <span class="ansi-blue-fg">+</span> <span class="ansi-blue-fg">" is not JSON serializable"</span><span class="ansi-blue-fg">)</span>
<span class="ansi-green-intense-fg ansi-bold">    174</span> 
<span class="ansi-green-intense-fg ansi-bold">    175</span>     <span class="ansi-green-fg">def</span> encode<span class="ansi-blue-fg">(</span>self<span class="ansi-blue-fg">,</span> o<span class="ansi-blue-fg">)</span><span class="ansi-blue-fg">:</span>

<span class="ansi-red-fg">TypeError</span>: &lt;__main__.Point object at 0x10c7a70f0&gt; is not JSON serializable</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>인터페이스를 직렬화하고 싶다면 인스턴스를 입력으로 받아 직렬화 가능한 딕셔너리를 반환하는 함수 제공</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [174]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">serialize_instance</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
    <span class="n">d</span> <span class="o">=</span> <span class="p">{</span> <span class="s1">'__classname__'</span><span class="p">:</span> <span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span> <span class="p">}</span>
    <span class="n">d</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="nb">vars</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">d</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>인스턴스를 돌려받고 싶다면 다음과 같은 코드 작성</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [175]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 알려지지 않은 클래스에 이름을 매핑하는 딕셔너리</span>
<span class="n">classes</span> <span class="o">=</span> <span class="p">{</span>
<span class="s1">'Point'</span><span class="p">:</span> <span class="n">Point</span>
<span class="p">}</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [192]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">unserialize_object</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>
    <span class="n">clsname</span> <span class="o">=</span> <span class="n">d</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">'__classname__'</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">clsname</span><span class="p">:</span>
        <span class="n">cls</span> <span class="o">=</span> <span class="n">classes</span><span class="p">[</span><span class="n">clsname</span><span class="p">]</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">cls</span><span class="o">.</span><span class="n">__new__</span><span class="p">(</span><span class="n">cls</span><span class="p">)</span> <span class="c1"># __init__을 호출하지 않고 인스턴스 만들기</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="c1"># 아 이 줄 찾아 삼만리 했잖아. 책에는 들여쓰기가 되어있었다..</span>
        <span class="c1"># 그러니 x만 setting하고 obj를 돌려주니 y가 있을 수가 있나...</span>
        <span class="k">return</span> <span class="n">obj</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">d</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [193]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">p</span> <span class="o">=</span> <span class="n">Point</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [194]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="n">serialize_instance</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [195]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> 
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[195]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'{"x": 2, "y": 3, "__classname__": "Point"}'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [196]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">object_hook</span><span class="o">=</span><span class="n">unserialize_object</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [197]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[197]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;__main__.Point at 0x10c744860&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [198]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">x</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[198]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>2</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [199]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span><span class="o">.</span><span class="n">y</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[199]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>3</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>json 모듈에는 숫자, NaN과 같은 특별값 등 하위 레벨 조절을 위한 많은 옵션이 있음</li>
<li>자세한 내용은 공식 문서 참고</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.3-단순한-XML-데이터-파싱">6.3 단순한 XML 데이터 파싱<a class="anchor-link" href="#6.3-%EB%8B%A8%EC%88%9C%ED%95%9C-XML-%EB%8D%B0%EC%9D%B4%ED%84%B0-%ED%8C%8C%EC%8B%B1">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>단순한 XML 문서에서 데이터를 얻고 싶다.</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>단순한 XML 문서에서 데이터를 얻기 위해 xml.etree.ElementTree 모듈을 사용하면 됨</li>
<li>Planet Python에서 RSS 피드를 받아 파싱을 해야 한다고 가정</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [210]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="k">import</span> <span class="n">urlopen</span>
<span class="kn">from</span> <span class="nn">xml.etree.ElementTree</span> <span class="k">import</span> <span class="n">parse</span>
<span class="kn">import</span> <span class="nn">copy</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [221]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># RSS 피드를 다운로드하고 파싱한다.</span>
<span class="n">u</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s1">'http://planet.python.org/rss20.xml'</span><span class="p">)</span>
<span class="n">doc</span> <span class="o">=</span> <span class="n">parse</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>

<span class="c1"># 관심있는 태그를 뽑아서 출력한다.</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">iterfind</span><span class="p">(</span><span class="s1">'channel/item'</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="s1">'title'</span><span class="p">)</span>
    <span class="n">date</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="s1">'pubDate'</span><span class="p">)</span>
    <span class="n">link</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">findtext</span><span class="p">(</span><span class="s1">'link'</span><span class="p">)</span>
    
    <span class="nb">print</span><span class="p">(</span><span class="n">title</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Vasudev Ram: New: The Hacker News API (with Python support)
Tue, 07 Oct 2014 21:45:56 +0000
http://jugad2.blogspot.com/2014/10/new-hacker-news-api-with-python-support.html

Martin Fitzpatrick: Pathomx v3.0.0 Release Candidate 2
Tue, 07 Oct 2014 19:47:24 +0000
http://martinfitzpatrick.name/article/pathomx-v3.0.0rc2-for-windows-and-mac/

Machinalis: Embedding Interactive Maps into an IPython Notebook
Tue, 07 Oct 2014 16:07:31 +0000
http://www.machinalis.com/blog/embedding-interactive-maps-into-an-ipython-nb/

Calvin Spealman: The Lessons of Vim
Tue, 07 Oct 2014 13:00:00 +0000
http://techblog.ironfroggy.com/2014/10/the-lessons-of-vim.html

Catalin George Festila: Windows all modules for python 3.4
Tue, 07 Oct 2014 08:53:23 +0000
http://python-catalin.blogspot.com/2014/10/windows-all-modules-for-python-34.html

Glyph Lefkowitz: Thank You Lennart
Tue, 07 Oct 2014 08:32:00 +0000
https://glyph.twistedmatrix.com/2014/10/thanks-lennart.html

PyCon PL Conference: Attendees registration on PyCon PL 2014 is closed!
Tue, 07 Oct 2014 08:18:00 +0000
http://pl.pycon.org/2014/en/aktualnosci,Attendees-registration-on-PyCon-PL-2014-is-closed-,31

Denis Kurov: Django Authentication Workflow
Tue, 07 Oct 2014 00:49:46 +0000
http://makkalot-opensource.blogspot.com/2014/10/django-authentication-workflow.html

Stefan Behnel: Faster Fractions
Mon, 06 Oct 2014 18:46:28 +0000
http://blog.behnel.de/posts/faster-fractions.html

Mike C. Fletcher: Back to React Learning
Mon, 06 Oct 2014 17:45:54 +0000
http://blog.vrplumber.com/b/2014/10/06/back-react-learning/

A. Jesse Jiryu Davis: reStructured Text With Chrome And LiveReload
Mon, 06 Oct 2014 15:41:12 +0000
http://emptysqua.re/blog/restructured-text-chrome-livereload/

Calvin Spealman: The Year I Didn't Attend A Conference
Mon, 06 Oct 2014 15:00:00 +0000
http://techblog.ironfroggy.com/2014/10/the-year-i-didnt-attend-conference.html

Carl Trachte: Event report:  pycon.za
Mon, 06 Oct 2014 10:24:00 +0000
http://pyright.blogspot.com/2014/10/event-report-pyconza.html

Kay Hayen: Nuitka Release 0.5.5
Sun, 05 Oct 2014 21:15:00 +0000
http://nuitka.net/posts/nuitka-release-055.html

Julien Tayon: An opinionated versioning system based on mapping versions string to numbers in weird base
Sun, 05 Oct 2014 20:52:23 +0000
http://beauty-of-imagination.blogspot.com/2014/10/an-opinionated-versioning-system-based.html

Chris Moffitt: Using Sets for Data Analysis
Sun, 05 Oct 2014 17:15:00 +0000
http://pbpython.com/data-analysis-with-sets.html

Paul Everitt: Recent work with RelStorage
Sun, 05 Oct 2014 16:19:09 +0000
http://pauleveritt.wordpress.com/2014/10/05/recent-work-with-relstorage/

Vasudev Ram: Flattening an arbitrarily nested list in Python
Sun, 05 Oct 2014 04:53:42 +0000
http://jugad2.blogspot.com/2014/10/flattening-arbitrarily-nested-list-in.html

Calvin Spealman: The Uselessness of HTML Imports
Sun, 05 Oct 2014 02:23:00 +0000
http://techblog.ironfroggy.com/2014/10/the-uselessness-of-html-imports.html

Calvin Spealman: Duckling, A Date-Parsing Library That Makes Me Rethink About Parsing
Sun, 05 Oct 2014 01:45:00 +0000
http://techblog.ironfroggy.com/2014/10/ducking-date-parsing-library-that-makes.html

A. Jesse Jiryu Davis: Motor 0.3.3 Released
Sun, 05 Oct 2014 00:47:26 +0000
http://emptysqua.re/blog/motor-0-3-3-released/

Django Weblog: Update to Django Community Code of Conduct
Sat, 04 Oct 2014 12:45:00 +0000
https://www.djangoproject.com/weblog/2014/oct/04/update-django-community-code-conduct/

Malthe Borch: DIY Background Tasks on EC2
Sat, 04 Oct 2014 09:30:00 +0000
https://maltheborch.com/2014/10/diy-background-tasks-on-ec2.html

Kushal Das: Event report: PyCon India 2014
Fri, 03 Oct 2014 18:26:00 +0000
http://kushaldas.in/posts/event-report-pycon-india-2014.html

PyCharm: Feature Spotlight: Tracking code changes with Local History
Fri, 03 Oct 2014 16:45:21 +0000
http://feedproxy.google.com/~r/Pycharm/~3/5ntDdUJaeoc/

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>더 많은 작업을 원한다면 print()문을 더 흥미로운 것으로 바꾸보자</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>많은 애플리케이션에서 XML로 인코딩된 데이터를 다룸</li>
<li>인터넷 상에서 데이터를 주고 받을 때 XML을 사용하는 곳이 많기도 하지만, 애플리케이션 데이터(워드 프로세싱, 음악 라이브러리 등)를 저장할 때도 일반적으로 사용하는 형식</li>
<li>많은 경우, XML이 데이터를 저장할 때 사용되면 문서 구조는 단순하고 이해하기 쉬움</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [250]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">xml.etree.ElementTree</span> <span class="k">import</span> <span class="n">dump</span>
<span class="kn">from</span> <span class="nn">urllib.parse</span> <span class="k">import</span> <span class="n">unquote</span>
<span class="kn">import</span> <span class="nn">html</span>
<span class="c1"># d = str(dump(doc))</span>
<span class="c1"># d[:100]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [241]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 이건 되는데..</span>
<span class="n">s</span> <span class="o">=</span> <span class="s1">'''&lt;description&gt;&amp;lt;br /&amp;gt;&amp;lt;p&amp;gt;&amp;lt;/p&amp;gt;By &amp;lt;a href="http://www.dancingbison.com"&amp;gt;Vasudev Ram&amp;lt;/a&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;br /&amp;gt;&amp;lt;div class="separator"&amp;gt;&amp;lt;a href='''</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [242]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">html</span><span class="o">.</span><span class="n">unescape</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[242]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'&lt;description&gt;&lt;br /&gt;&lt;p&gt;&lt;/p&gt;By &lt;a href="http://www.dancingbison.com"&gt;Vasudev Ram&lt;/a&gt;&lt;br /&gt;&lt;br /&gt;&lt;div class="separator"&gt;&lt;a href='</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>xml.etree.ElementTree.parse() 함수가 XML 문서를 파싱하고 문서 객체로 만ㄷ름</li>
<li>여기서부터 특정 XML 요소를 찾기 위해 find(), iterfind(), findtext()와 같은 함수를 사용한다.</li>
<li>함수에서 사용하는 인자는 channel/item 또는 title과 같이 특정 태그의 이름을 사용함</li>
</ul>
<ul>
<li>태그를 명시할 때, 전체 문서 구조체를 고려해야 함</li>
<li>모든 찾기 작업은 시작 요소에 상대적으로 발생함</li>
<li>마찬가지로 함수에 전달하는 태그 이름 역시 시작에 상대적</li>
<li>예를 들어, doc.iterfind('channel/item') 호출은 'channel' 요소의 'item' 요소를 찾는다.</li>
<li>doc은 문서의 상단을 나타냄(상위 레벨 "rss" 요소). 그 이후 item.findtext() 호출은 "item" 요소를 찾은 곳에서 상대적으로 발생</li>
<li>ElementTree 모듈이 나타내는 모든 요소는 파싱에 유용한 요소와 메소드를 약간 가지고 있음</li>
<li>tag요소에는 태그의 이름, text 요소에는 담겨있는 텍스트가 포함되어 있고, 필요한 경우 get() 메소드로 요소를 얻을 수 있음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [251]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">doc</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[251]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;xml.etree.ElementTree.ElementTree at 0x10caaf518&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [252]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">e</span> <span class="o">=</span> <span class="n">doc</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">'channel/title'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [253]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">e</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[253]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;Element 'title' at 0x10cc65138&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [254]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">e</span><span class="o">.</span><span class="n">tag</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[254]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'title'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [255]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">e</span><span class="o">.</span><span class="n">text</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[255]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'Planet Python'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [256]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">e</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'some_attribute'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>XML 파싱에 xml.etree.ElementTree 말고 다른 것을 사용할 수 있음</li>
<li>좀 더 고급 애플리케이션을 개발중이라면 lxml 사용 고려</li>
<li>ElementTree와 동일한 인터페이스를 사용하기 때문에 이번 레시피에 사용한 예제를 동일하게 사용 가능</li>
<li>단순히 처음 임포트 구문만 from xml.etree import parse로 바꾸면 됨</li>
<li>lxml은 XML 표준과 완벽히 동일한 헤택을 제공</li>
<li>또한 매우 빠르고 검증, XSLT, XPath와 같은 모든 기능 제공</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.4-매우-큰-XML-파일-증분-파싱하기">6.4 매우 큰 XML 파일 증분 파싱하기<a class="anchor-link" href="#6.4-%EB%A7%A4%EC%9A%B0-%ED%81%B0-XML-%ED%8C%8C%EC%9D%BC-%EC%A6%9D%EB%B6%84-%ED%8C%8C%EC%8B%B1%ED%95%98%EA%B8%B0">¶</a>
</h3>
<ul>
<li>Pass</li>
<li>현재 내가 하고자 하는것과 어울리지 않음</li>
<li>그리고 재미가 없음..</li>
<li>나중에 다시 한 번 찾아보겠음</li>
</ul>
<h3 id="6.5-딕셔너리를-XML로-바꾸기">6.5 딕셔너리를 XML로 바꾸기<a class="anchor-link" href="#6.5-%EB%94%95%EC%85%94%EB%84%88%EB%A6%AC%EB%A5%BC-XML%EB%A1%9C-%EB%B0%94%EA%BE%B8%EA%B8%B0">¶</a>
</h3>
<h3 id="6.6-XML-파싱,-수정,-저장">6.6 XML 파싱, 수정, 저장<a class="anchor-link" href="#6.6-XML-%ED%8C%8C%EC%8B%B1,-%EC%88%98%EC%A0%95,-%EC%A0%80%EC%9E%A5">¶</a>
</h3>
<h3 id="6.7-네임스페이스로-XML-문서-파싱">6.7 네임스페이스로 XML 문서 파싱<a class="anchor-link" href="#6.7-%EB%84%A4%EC%9E%84%EC%8A%A4%ED%8E%98%EC%9D%B4%EC%8A%A4%EB%A1%9C-XML-%EB%AC%B8%EC%84%9C-%ED%8C%8C%EC%8B%B1">¶</a>
</h3>
<h3 id="6.8-관계형-데이터베이스-작업">6.8 관계형 데이터베이스 작업<a class="anchor-link" href="#6.8-%EA%B4%80%EA%B3%84%ED%98%95-%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-%EC%9E%91%EC%97%85">¶</a>
</h3>
<h3 id="6.9-16진수-인코딩,-디코딩">6.9 16진수 인코딩, 디코딩<a class="anchor-link" href="#6.9-16%EC%A7%84%EC%88%98-%EC%9D%B8%EC%BD%94%EB%94%A9,-%EB%94%94%EC%BD%94%EB%94%A9">¶</a>
</h3>
<h3 id="6.10-Base64-인코딩,-디코딩">6.10 Base64 인코딩, 디코딩<a class="anchor-link" href="#6.10-Base64-%EC%9D%B8%EC%BD%94%EB%94%A9,-%EB%94%94%EC%BD%94%EB%94%A9">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>Base64를 사용한 바이너리 데이터를 인코딩, 디코딩해야 함</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>base64 모듈에 b64encode()와 b64decode() 함수를 사용하면 이 문제를 해결</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [258]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 바이트 데이터</span>
<span class="n">s</span> <span class="o">=</span> <span class="n">b</span><span class="s1">'hello'</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [259]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Base64로 인코딩</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="n">a</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[259]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>b'aGVsbG8='</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [260]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># Base64를 디코딩</span>
<span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[260]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>b'hello'</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>Base64 인코딩은 바이트 문자열과 바이트 배열과 같은 바이트 데이터에만 사용하도록 디자인</li>
<li>또한 인코딩의 결과물은 항상 바이트 문자열이 됨</li>
<li>Base64 인코딩 데이터와 유니코드 텍스트를 함께 사용하려면 추가적인 디코딩 작업을 거쳐야 함</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [262]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">a</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">s</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">'ascii'</span><span class="p">)</span>
<span class="n">a</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[262]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>'aGVsbG8='</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Base64를 디코딩할 때 바이크 문자열과 유니코드 텍스트를 사용할 수 있음. 하지만 유니코드 문자열에는 ASCII 문자만 포함해야 함</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.11-바이너리-배열-구조체-읽고-쓰기">6.11 바이너리 배열 구조체 읽고 쓰기<a class="anchor-link" href="#6.11-%EB%B0%94%EC%9D%B4%EB%84%88%EB%A6%AC-%EB%B0%B0%EC%97%B4-%EA%B5%AC%EC%A1%B0%EC%B2%B4-%EC%9D%BD%EA%B3%A0-%EC%93%B0%EA%B8%B0">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>바이너리 배열 구조를 파이썬 튜플로 읽거나 쓰고 싶다.</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>바이너리 데이터를 다루기 위해서 struct 모듈 사용</li>
<li>struct를 사용해서 튜플을 인코딩하는 식으로 파이썬 튜플을 바이너리 파일에 써보자.</li>
<li><a href="https://docs.python.org/2/library/struct.html">7.3. struct â Interpret strings as packed binary data — Python 2.7.8 documentation</a></li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">struct</span> <span class="k">import</span> <span class="n">Struct</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">write_records</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="nb">format</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="sd">'''일련의 튜플을 구조체의 바이너리 파일에 기록'''</span>
    <span class="n">record_struct</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">records</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">record_struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="n">r</span><span class="p">))</span>
        
<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="n">records</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">2.3</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">),</span>
               <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mf">7.8</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">),</span>
               <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mf">13.4</span><span class="p">,</span> <span class="mf">56.7</span><span class="p">)]</span>
    
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/data.b'</span><span class="p">,</span> <span class="s1">'wb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">write_records</span><span class="p">(</span><span class="n">records</span><span class="p">,</span> <span class="s1">'&lt;idd'</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>cat 06/data.b
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>   ffffff@      @   333333@      "@
   ������*@�����YL@</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이 파일을 튜플 리스트로 읽어 들이는 방법은 여러가지</li>
<li>1: 파일을 조각 조각 읽어 들일 생각이라면 다음 코드 사용</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">struct</span> <span class="k">import</span> <span class="n">Struct</span>

<span class="k">def</span> <span class="nf">read_records</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
    <span class="n">record_struct</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
    <span class="n">chunks</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">record_struct</span><span class="o">.</span><span class="n">size</span><span class="p">),</span> <span class="n">b</span><span class="s1">''</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">record_struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span> <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/data.b'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">read_records</span><span class="p">(</span><span class="s1">'&lt;idd'</span><span class="p">,</span> <span class="n">f</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>(1, 2.3, 4.5)
(6, 7.8, 9.0)
(12, 13.4, 56.7)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>파일을 바이트 문자열에 한 번에 읽어 들이고 추후 여러 조각으로 변환</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">struct</span> <span class="k">import</span> <span class="n">Struct</span>

<span class="k">def</span> <span class="nf">unpack_records</span><span class="p">(</span><span class="nb">format</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="n">record_struct</span> <span class="o">=</span> <span class="n">Struct</span><span class="p">(</span><span class="nb">format</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">record_struct</span><span class="o">.</span><span class="n">unpack_from</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="n">record_struct</span><span class="o">.</span><span class="n">size</span><span class="p">))</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">'__main__'</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">'06/data.b'</span><span class="p">,</span> <span class="s1">'rb'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        
    <span class="k">for</span> <span class="n">rec</span> <span class="ow">in</span> <span class="n">unpack_records</span><span class="p">(</span><span class="s1">'&lt;idd'</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">rec</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>(1, 2.3, 4.5)
(6, 7.8, 9.0)
(12, 13.4, 56.7)
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="Skip-나중에-다시-보자">Skip 나중에 다시 보자<a class="anchor-link" href="#Skip-%EB%82%98%EC%A4%91%EC%97%90-%EB%8B%A4%EC%8B%9C-%EB%B3%B4%EC%9E%90">¶</a>
</h4>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="6.13-데이터-용약과-통계-수행">6.13 데이터 용약과 통계 수행<a class="anchor-link" href="#6.13-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9A%A9%EC%95%BD%EA%B3%BC-%ED%86%B5%EA%B3%84-%EC%88%98%ED%96%89">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>커다란 dataset를 요약하거나 통계를 내고 싶다.</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>통계, 시계열 등과 연관있는 데이터 분석을 하려면 Pandas 라이브러리를 알아봐야 함</li>
<li>
<a href="https://data.cityofchicago.org/Service-Requests/311-Service-Requests-Rodent-Baiting/97t6-zrhs">시카고의 쥐와 설치류 데이터베이스</a>(google 검색해서 찾음)를 Pandas로 분석하는 예제를 통해 맛보기를 해보자.</li>
<li>글을 쓰고 있는 현재 이 자료를 열면 CSV 파일에 74,000 개의 데이터가 들어있다.</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<blockquote>
<p>pip install pandas</p>
</blockquote>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rats</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">'06/rats.csv'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">rats</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[14]:</div>

<div class="output_html rendered_html output_subarea output_execute_result">
<div style="max-height:1000px;max-width:1500px;overflow:auto;">
<table border="1" class="dataframe">
<thead><tr style="text-align: right;">
<th></th>
      <th>Creation Date</th>
      <th>Status</th>
      <th>Completion Date</th>
      <th>Service Request Number</th>
      <th>Type of Service Request</th>
      <th>Number of Premises Baited</th>
      <th>Number of Premises with Garbage</th>
      <th>Number of Premises with Rats</th>
      <th>Current Activity</th>
      <th>Most Recent Action</th>
      <th>Street Address</th>
      <th>ZIP Code</th>
      <th>X Coordinate</th>
      <th>Y Coordinate</th>
      <th>Ward</th>
      <th>Police District</th>
      <th>Community Area</th>
      <th>Latitude</th>
      <th>Longitude</th>
      <th>Location</th>
    </tr></thead>
<tbody>
<tr>
<th>0     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708674</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    4908 W HUTCHINSON ST</td>
      <td> 60641</td>
      <td> 1142946.950001</td>
      <td> 1927808.160332</td>
      <td> 45</td>
      <td> 16</td>
      <td> 15</td>
      <td> 41.957953</td>
      <td>-87.749872</td>
      <td> (41.957952909185856, -87.74987175876076)</td>
    </tr>
<tr>
<th>1     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708613</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        6915 S BISHOP ST</td>
      <td> 60636</td>
      <td> 1167859.632111</td>
      <td> 1858888.135675</td>
      <td> 17</td>
      <td>  7</td>
      <td> 67</td>
      <td> 41.768329</td>
      <td>-87.660270</td>
      <td>  (41.768328601514455, -87.6602704707055)</td>
    </tr>
<tr>
<th>2     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707402</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        1500 N AVERS AVE</td>
      <td> 60651</td>
      <td> 1150433.825895</td>
      <td> 1909696.767409</td>
      <td> 30</td>
      <td> 25</td>
      <td> 23</td>
      <td> 41.908111</td>
      <td>-87.722821</td>
      <td> (41.908110540569005, -87.72282129792974)</td>
    </tr>
<tr>
<th>3     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707381</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        1400 N AVERS AVE</td>
      <td> 60651</td>
      <td> 1150455.039795</td>
      <td> 1909041.263606</td>
      <td> 30</td>
      <td> 25</td>
      <td> 23</td>
      <td> 41.906311</td>
      <td>-87.722761</td>
      <td>  (41.90631136039996, -87.72276050861144)</td>
    </tr>
<tr>
<th>4     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708605</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      5003 S KEDVALE AVE</td>
      <td> 60632</td>
      <td> 1149546.979381</td>
      <td> 1871115.957791</td>
      <td> 14</td>
      <td>  8</td>
      <td> 57</td>
      <td> 41.802257</td>
      <td>-87.727080</td>
      <td>  (41.80225730577933, -87.72707981049875)</td>
    </tr>
<tr>
<th>5     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707939</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     4228 N LAWNDALE AVE</td>
      <td> 60618</td>
      <td> 1150966.422794</td>
      <td> 1927849.117493</td>
      <td> 39</td>
      <td> 17</td>
      <td> 16</td>
      <td> 41.957912</td>
      <td>-87.720388</td>
      <td> (41.957911681241406, -87.72038806227229)</td>
    </tr>
<tr>
<th>6     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707412</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td> 5129 N CENTRAL PARK AVE</td>
      <td> 60625</td>
      <td> 1151461.600423</td>
      <td> 1933842.899970</td>
      <td> 39</td>
      <td> 17</td>
      <td> 13</td>
      <td> 41.974349</td>
      <td>-87.718409</td>
      <td> (41.974349283846536, -87.71840945909008)</td>
    </tr>
<tr>
<th>7     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707409</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     680 N LAKE SHORE DR</td>
      <td> 60611</td>
      <td> 1179659.954073</td>
      <td> 1905017.250129</td>
      <td> 42</td>
      <td> 18</td>
      <td>  8</td>
      <td> 41.894649</td>
      <td>-87.615604</td>
      <td>  (41.89464875944979, -87.61560417245973)</td>
    </tr>
<tr>
<th>8     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707407</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       6223 N LE MAI AVE</td>
      <td> 60646</td>
      <td> 1140366.422315</td>
      <td> 1941009.134206</td>
      <td> 45</td>
      <td> 16</td>
      <td> 12</td>
      <td> 41.994225</td>
      <td>-87.759033</td>
      <td>  (41.99422528183371, -87.75903344019028)</td>
    </tr>
<tr>
<th>9     </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707841</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        6631 N MOZART ST</td>
      <td> 60645</td>
      <td> 1156129.162233</td>
      <td> 1943863.671887</td>
      <td> 50</td>
      <td> 24</td>
      <td>  2</td>
      <td> 42.001754</td>
      <td>-87.700973</td>
      <td>  (42.00175352887489, -87.70097332471786)</td>
    </tr>
<tr>
<th>10    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707424</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>         11225 S TROY ST</td>
      <td> 60655</td>
      <td> 1157363.428932</td>
      <td> 1830008.682474</td>
      <td> 19</td>
      <td> 22</td>
      <td> 74</td>
      <td> 41.689297</td>
      <td>-87.699524</td>
      <td>  (41.68929742981148, -87.69952381260245)</td>
    </tr>
<tr>
<th>11    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707631</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        1240 W BARRY AVE</td>
      <td> 60657</td>
      <td> 1167484.356217</td>
      <td> 1920717.586612</td>
      <td> 32</td>
      <td> 19</td>
      <td>  6</td>
      <td> 41.938002</td>
      <td>-87.659869</td>
      <td>  (41.93800218559503, -87.65986853469147)</td>
    </tr>
<tr>
<th>12    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707536</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      9516 S OGLESBY AVE</td>
      <td> 60617</td>
      <td> 1193753.869877</td>
      <td> 1842362.443233</td>
      <td>  7</td>
      <td>  4</td>
      <td> 51</td>
      <td> 41.722385</td>
      <td>-87.565897</td>
      <td>  (41.72238546736288, -87.56589719418255)</td>
    </tr>
<tr>
<th>13    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708547</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       4350 N CICERO AVE</td>
      <td> 60641</td>
      <td> 1143584.306419</td>
      <td> 1928578.821227</td>
      <td> 45</td>
      <td> 16</td>
      <td> 15</td>
      <td> 41.960056</td>
      <td>-87.747509</td>
      <td>  (41.96005573563926, -87.74750921768275)</td>
    </tr>
<tr>
<th>14    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708358</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>   11447 S CHAMPLAIN AVE</td>
      <td> 60628</td>
      <td> 1182622.317169</td>
      <td> 1829179.763628</td>
      <td>  9</td>
      <td>  5</td>
      <td> 50</td>
      <td> 41.686476</td>
      <td>-87.607077</td>
      <td>  (41.68647557183858, -87.60707728549757)</td>
    </tr>
<tr>
<th>15    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708287</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       4544 N MOBILE AVE</td>
      <td> 60630</td>
      <td> 1133526.838073</td>
      <td> 1929663.931429</td>
      <td> 38</td>
      <td> 16</td>
      <td> 15</td>
      <td> 41.963216</td>
      <td>-87.784460</td>
      <td>  (41.96321611063977, -87.78446024221064)</td>
    </tr>
<tr>
<th>16    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01707967</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     4232 N LAWNDALE AVE</td>
      <td> 60618</td>
      <td> 1150965.622794</td>
      <td> 1927876.017493</td>
      <td> 39</td>
      <td> 17</td>
      <td> 16</td>
      <td> 41.957986</td>
      <td>-87.720390</td>
      <td>  (41.95798551245732, -87.72039029600587)</td>
    </tr>
<tr>
<th>17    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708077</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     4222 N LAWNDALE AVE</td>
      <td> 60618</td>
      <td> 1150967.622794</td>
      <td> 1927808.917493</td>
      <td> 39</td>
      <td> 17</td>
      <td> 16</td>
      <td> 41.957801</td>
      <td>-87.720385</td>
      <td> (41.957801346026415, -87.72038470773528)</td>
    </tr>
<tr>
<th>18    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708524</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      5105 W OAKDALE AVE</td>
      <td> 60641</td>
      <td> 1141830.490628</td>
      <td> 1919133.826884</td>
      <td> 31</td>
      <td> 25</td>
      <td> 19</td>
      <td> 41.934171</td>
      <td>-87.754192</td>
      <td> (41.934170511750004, -87.75419177686257)</td>
    </tr>
<tr>
<th>19    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708469</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>            157 N ADA ST</td>
      <td> 60607</td>
      <td> 1167406.064126</td>
      <td> 1901226.677618</td>
      <td> 27</td>
      <td> 12</td>
      <td> 28</td>
      <td> 41.884520</td>
      <td>-87.660718</td>
      <td>  (41.88451962489873, -87.66071801603259)</td>
    </tr>
<tr>
<th>20    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708515</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      5100 W OAKDALE AVE</td>
      <td> 60641</td>
      <td> 1141864.190628</td>
      <td> 1919134.626884</td>
      <td> 31</td>
      <td> 25</td>
      <td> 19</td>
      <td> 41.934172</td>
      <td>-87.754068</td>
      <td>  (41.93417208227522, -87.75406790849907)</td>
    </tr>
<tr>
<th>21    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708487</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      2968 W CORTLAND ST</td>
      <td> 60647</td>
      <td> 1156082.406796</td>
      <td> 1912475.909782</td>
      <td> 35</td>
      <td> 14</td>
      <td> 22</td>
      <td> 41.915625</td>
      <td>-87.701996</td>
      <td>  (41.91562454305178, -87.70199606944088)</td>
    </tr>
<tr>
<th>22    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708852</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     5909 N CALDWELL AVE</td>
      <td> 60646</td>
      <td> 1143646.655702</td>
      <td> 1938819.072178</td>
      <td> 39</td>
      <td> 17</td>
      <td> 12</td>
      <td> 41.988155</td>
      <td>-87.747022</td>
      <td> (41.988154601191624, -87.74702232204947)</td>
    </tr>
<tr>
<th>23    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01709769</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      4633 W HARRISON ST</td>
      <td> 60644</td>
      <td> 1145592.447469</td>
      <td> 1896953.515994</td>
      <td> 24</td>
      <td> 11</td>
      <td> 25</td>
      <td> 41.873235</td>
      <td>-87.740929</td>
      <td>  (41.87323478970172, -87.74092940501316)</td>
    </tr>
<tr>
<th>24    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708704</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    917 N LEAMINGTON AVE</td>
      <td> 60651</td>
      <td> 1141857.169506</td>
      <td> 1905615.879690</td>
      <td> 37</td>
      <td> 15</td>
      <td> 25</td>
      <td> 41.897075</td>
      <td>-87.754429</td>
      <td>  (41.89707530531422, -87.75442905943434)</td>
    </tr>
<tr>
<th>25    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708740</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>           938 W 31ST PL</td>
      <td> 60608</td>
      <td> 1170564.615678</td>
      <td> 1884008.799922</td>
      <td> 11</td>
      <td>  9</td>
      <td> 60</td>
      <td> 41.837204</td>
      <td>-87.649623</td>
      <td>  (41.83720388653583, -87.64962296601966)</td>
    </tr>
<tr>
<th>26    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708731</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      4917 N KEDVALE AVE</td>
      <td> 60630</td>
      <td> 1147833.775395</td>
      <td> 1932352.027521</td>
      <td> 39</td>
      <td> 17</td>
      <td> 14</td>
      <td> 41.970329</td>
      <td>-87.731789</td>
      <td> (41.970328908371066, -87.73178863263537)</td>
    </tr>
<tr>
<th>27    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01708865</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        3736 W PIPPIN ST</td>
      <td> 60652</td>
      <td> 1152766.583769</td>
      <td> 1853410.092421</td>
      <td> 18</td>
      <td>  8</td>
      <td> 70</td>
      <td> 41.753607</td>
      <td>-87.715738</td>
      <td>  (41.75360674492404, -87.71573839632325)</td>
    </tr>
<tr>
<th>28    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01709673</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        1939 W NELSON ST</td>
      <td> 60657</td>
      <td> 1162881.847868</td>
      <td> 1920264.945468</td>
      <td> 32</td>
      <td> 19</td>
      <td>  5</td>
      <td> 41.936858</td>
      <td>-87.676796</td>
      <td>  (41.93685808352693, -87.67679637933988)</td>
    </tr>
<tr>
<th>29    </th>
      <td> 10/06/2014</td>
      <td>            Open</td>
      <td>        NaN</td>
      <td>            14-01709543</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      2448 W SHERWIN AVE</td>
      <td> 60645</td>
      <td> 1158611.719992</td>
      <td> 1948725.540029</td>
      <td> 50</td>
      <td> 24</td>
      <td>  2</td>
      <td> 42.015044</td>
      <td>-87.691706</td>
      <td>   (42.01504397458928, -87.6917062515062)</td>
    </tr>
<tr>
<th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
<tr>
<th>135514</th>
      <td> 10/04/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01611595</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     5836 S ARTESIAN AVE</td>
      <td> 60629</td>
      <td> 1161035.872799</td>
      <td> 1865896.970369</td>
      <td> 16</td>
      <td>  8</td>
      <td> 63</td>
      <td> 41.787706</td>
      <td>-87.685089</td>
      <td>  (41.78770562679793, -87.68508927571739)</td>
    </tr>
<tr>
<th>135515</th>
      <td> 10/03/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01605954</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       2426 W PRATT BLVD</td>
      <td> 60645</td>
      <td> 1158807.060017</td>
      <td> 1945072.383824</td>
      <td> 50</td>
      <td> 24</td>
      <td>  2</td>
      <td> 42.005016</td>
      <td>-87.691088</td>
      <td>  (42.00501558156435, -87.69108831828841)</td>
    </tr>
<tr>
<th>135516</th>
      <td> 09/25/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01561251</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       1428 S HAMLIN AVE</td>
      <td> 60623</td>
      <td> 1151278.490102</td>
      <td> 1892801.067007</td>
      <td> 24</td>
      <td> 10</td>
      <td> 29</td>
      <td> 41.861730</td>
      <td>-87.720162</td>
      <td>  (41.86173040969119, -87.72016189317569)</td>
    </tr>
<tr>
<th>135517</th>
      <td> 09/23/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01552578</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     1341 N LOCKWOOD AVE</td>
      <td> 60651</td>
      <td> 1140777.668819</td>
      <td> 1908526.860010</td>
      <td> 37</td>
      <td> 25</td>
      <td> 25</td>
      <td> 41.905083</td>
      <td>-87.758322</td>
      <td>  (41.90508329625724, -87.75832229923284)</td>
    </tr>
<tr>
<th>135518</th>
      <td> 09/22/2010</td>
      <td>       Completed</td>
      <td> 01/07/2011</td>
      <td>            10-01545326</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>  1</td>
      <td>  0</td>
      <td>  1</td>
      <td>    Dispatch Crew</td>
      <td>                    Inspected and baited</td>
      <td>      1011 N LARAMIE AVE</td>
      <td> 60651</td>
      <td> 1141508.457520</td>
      <td> 1906237.199904</td>
      <td> 37</td>
      <td> 15</td>
      <td> 25</td>
      <td> 41.898787</td>
      <td>-87.755694</td>
      <td>   (41.89878673057768, -87.7556944800398)</td>
    </tr>
<tr>
<th>135519</th>
      <td> 09/14/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01483769</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       7530 S WABASH AVE</td>
      <td> 60619</td>
      <td> 1178021.518474</td>
      <td> 1855100.707677</td>
      <td>  6</td>
      <td>  6</td>
      <td> 69</td>
      <td> 41.757711</td>
      <td>-87.623137</td>
      <td>  (41.75771122728605, -87.62313707074553)</td>
    </tr>
<tr>
<th>135520</th>
      <td> 09/14/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01486023</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>        5959 S LAFLIN ST</td>
      <td> 60636</td>
      <td> 1167354.393020</td>
      <td> 1865213.788830</td>
      <td> 16</td>
      <td>  7</td>
      <td> 67</td>
      <td> 41.785698</td>
      <td>-87.661941</td>
      <td> (41.785697828520156, -87.66194139257287)</td>
    </tr>
<tr>
<th>135521</th>
      <td> 09/13/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01476446</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    9553 S PRINCETON AVE</td>
      <td> 60628</td>
      <td> 1175964.048381</td>
      <td> 1841578.557199</td>
      <td> 21</td>
      <td>  5</td>
      <td> 49</td>
      <td> 41.720651</td>
      <td>-87.631082</td>
      <td>  (41.72065109536011, -87.63108179029372)</td>
    </tr>
<tr>
<th>135522</th>
      <td> 09/01/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01409020</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>          1111 E 93RD ST</td>
      <td> 60619</td>
      <td> 1185291.743719</td>
      <td> 1843539.750299</td>
      <td>  8</td>
      <td>  4</td>
      <td> 47</td>
      <td> 41.725819</td>
      <td>-87.596855</td>
      <td>  (41.72581895961811, -87.59685549830274)</td>
    </tr>
<tr>
<th>135523</th>
      <td> 09/01/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01412884</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>          3913 W 57TH PL</td>
      <td> 60629</td>
      <td> 1151266.356900</td>
      <td> 1866188.264604</td>
      <td> 13</td>
      <td>  8</td>
      <td> 62</td>
      <td> 41.788702</td>
      <td>-87.720903</td>
      <td>  (41.78870152820766, -87.72090280848239)</td>
    </tr>
<tr>
<th>135524</th>
      <td> 08/30/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01390101</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    7551 N CLAREMONT AVE</td>
      <td> 60645</td>
      <td> 1159347.169967</td>
      <td> 1949994.101985</td>
      <td> 49</td>
      <td> 24</td>
      <td>  2</td>
      <td> 42.018510</td>
      <td>-87.688965</td>
      <td>   (42.01850978301388, -87.6889649223713)</td>
    </tr>
<tr>
<th>135525</th>
      <td> 08/24/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01357763</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    2428 N MAPLEWOOD AVE</td>
      <td> 60647</td>
      <td> 1158960.340079</td>
      <td> 1916052.316975</td>
      <td>  1</td>
      <td> 14</td>
      <td> 22</td>
      <td> 41.925380</td>
      <td>-87.691324</td>
      <td> (41.925379847343194, -87.69132439131293)</td>
    </tr>
<tr>
<th>135526</th>
      <td> 08/12/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01283620</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      1718 W LE MOYNE ST</td>
      <td> 60622</td>
      <td> 1164664.151207</td>
      <td> 1910153.949810</td>
      <td>  1</td>
      <td> 14</td>
      <td> 24</td>
      <td> 41.909075</td>
      <td>-87.670533</td>
      <td>  (41.90907525072416, -87.67053340310254)</td>
    </tr>
<tr>
<th>135527</th>
      <td> 08/08/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01247571</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>      1410 W BERTEAU AVE</td>
      <td> 60613</td>
      <td> 1166079.712721</td>
      <td> 1928002.330313</td>
      <td> 47</td>
      <td> 19</td>
      <td>  6</td>
      <td> 41.958022</td>
      <td>-87.664822</td>
      <td> (41.958022022585844, -87.66482204074649)</td>
    </tr>
<tr>
<th>135528</th>
      <td> 08/05/2010</td>
      <td>       Completed</td>
      <td> 02/22/2013</td>
      <td>            10-01233874</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>    Dispatch Crew</td>
      <td> Area inspected, no cause and no baiting</td>
      <td>        3315 W OGDEN AVE</td>
      <td> 60623</td>
      <td> 1154509.572975</td>
      <td> 1891077.149085</td>
      <td> 24</td>
      <td> 10</td>
      <td> 29</td>
      <td> 41.856936</td>
      <td>-87.708347</td>
      <td>  (41.85693584874869, -87.70834713693091)</td>
    </tr>
<tr>
<th>135529</th>
      <td> 08/05/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01232122</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       7530 S WABASH AVE</td>
      <td> 60619</td>
      <td> 1178021.518474</td>
      <td> 1855100.707677</td>
      <td>  6</td>
      <td>  6</td>
      <td> 69</td>
      <td> 41.757711</td>
      <td>-87.623137</td>
      <td>  (41.75771122728605, -87.62313707074553)</td>
    </tr>
<tr>
<th>135530</th>
      <td> 07/30/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01195231</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    2755 N SPAULDING AVE</td>
      <td> 60647</td>
      <td> 1153780.944531</td>
      <td> 1918191.014328</td>
      <td> 35</td>
      <td> 14</td>
      <td> 22</td>
      <td> 41.931353</td>
      <td>-87.710299</td>
      <td>  (41.93135343973727, -87.71029893507783)</td>
    </tr>
<tr>
<th>135531</th>
      <td> 07/20/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01112346</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    7939 S HERMITAGE AVE</td>
      <td> 60620</td>
      <td> 1166060.102880</td>
      <td> 1852046.485427</td>
      <td> 21</td>
      <td>  6</td>
      <td> 71</td>
      <td> 41.749593</td>
      <td>-87.667061</td>
      <td>  (41.74959262320285, -87.66706085160479)</td>
    </tr>
<tr>
<th>135532</th>
      <td> 07/20/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01115674</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       5637 S KEELER AVE</td>
      <td> 60629</td>
      <td> 1149331.611090</td>
      <td> 1866765.049984</td>
      <td> 13</td>
      <td>  8</td>
      <td> 62</td>
      <td> 41.790322</td>
      <td>-87.727982</td>
      <td>  (41.79032191699322, -87.72798203264237)</td>
    </tr>
<tr>
<th>135533</th>
      <td> 07/19/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01110565</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     6925 S ARTESIAN AVE</td>
      <td> 60629</td>
      <td> 1161237.257799</td>
      <td> 1858665.025277</td>
      <td> 17</td>
      <td>  8</td>
      <td> 66</td>
      <td> 41.767856</td>
      <td>-87.684551</td>
      <td>  (41.76785599857217, -87.68455093042334)</td>
    </tr>
<tr>
<th>135534</th>
      <td> 07/19/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01109534</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    7252 S HERMITAGE AVE</td>
      <td> 60636</td>
      <td> 1165936.695291</td>
      <td> 1856601.580785</td>
      <td> 17</td>
      <td>  7</td>
      <td> 67</td>
      <td> 41.762095</td>
      <td>-87.667384</td>
      <td>  (41.76209506261827, -87.66738386159072)</td>
    </tr>
<tr>
<th>135535</th>
      <td> 07/15/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01079944</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>    4350 W CONGRESS PKWY</td>
      <td> 60624</td>
      <td> 1147309.510033</td>
      <td> 1897326.930003</td>
      <td> 24</td>
      <td> 11</td>
      <td> 26</td>
      <td> 41.874227</td>
      <td>-87.734616</td>
      <td>  (41.87422678972962, -87.73461560327037)</td>
    </tr>
<tr>
<th>135536</th>
      <td> 07/15/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01084116</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>   3727 N MARSHFIELD AVE</td>
      <td> 60613</td>
      <td> 1164658.235513</td>
      <td> 1924811.151620</td>
      <td> 47</td>
      <td> 19</td>
      <td>  6</td>
      <td> 41.949296</td>
      <td>-87.670139</td>
      <td>  (41.94929559096112, -87.67013866169015)</td>
    </tr>
<tr>
<th>135537</th>
      <td> 07/12/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01055770</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>       2614 N RACINE AVE</td>
      <td> 60614</td>
      <td> 1167856.483594</td>
      <td> 1917561.186392</td>
      <td> 32</td>
      <td> 19</td>
      <td>  7</td>
      <td> 41.929333</td>
      <td>-87.658592</td>
      <td>  (41.92933283716873, -87.65859219580943)</td>
    </tr>
<tr>
<th>135538</th>
      <td> 07/06/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01010108</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td> 2659 N CENTRAL PARK AVE</td>
      <td> 60647</td>
      <td> 1151929.608121</td>
      <td> 1917447.313431</td>
      <td> 35</td>
      <td> 14</td>
      <td> 22</td>
      <td> 41.929349</td>
      <td>-87.717122</td>
      <td>   (41.92934937797203, -87.7171219455323)</td>
    </tr>
<tr>
<th>135539</th>
      <td> 07/05/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-01008721</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     3650 N MAGNOLIA AVE</td>
      <td> 60613</td>
      <td> 1167317.220021</td>
      <td> 1924042.110595</td>
      <td> 44</td>
      <td> 19</td>
      <td>  6</td>
      <td> 41.947128</td>
      <td>-87.660387</td>
      <td>  (41.94712843446327, -87.66038686997513)</td>
    </tr>
<tr>
<th>135540</th>
      <td> 06/15/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-00860089</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>     4742 N MAGNOLIA AVE</td>
      <td>   NaN</td>
      <td> 1167037.166277</td>
      <td> 1931628.084181</td>
      <td> 46</td>
      <td> 23</td>
      <td>  3</td>
      <td> 41.967951</td>
      <td>-87.661198</td>
      <td>  (41.967950674945655, -87.6611975602135)</td>
    </tr>
<tr>
<th>135541</th>
      <td> 01/20/2010</td>
      <td> Completed - Dup</td>
      <td> 01/07/2011</td>
      <td>            10-00083362</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>              NaN</td>
      <td>                                     NaN</td>
      <td>          1111 E 93RD ST</td>
      <td> 60619</td>
      <td> 1185291.743719</td>
      <td> 1843539.750299</td>
      <td>  8</td>
      <td>  4</td>
      <td> 47</td>
      <td> 41.725819</td>
      <td>-87.596855</td>
      <td>  (41.72581895961811, -87.59685549830274)</td>
    </tr>
<tr>
<th>135542</th>
      <td> 11/29/1999</td>
      <td>       Completed</td>
      <td> 12/26/2013</td>
      <td>            99-01925037</td>
      <td> Rodent Baiting/Rat Complaint</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>    Dispatch Crew</td>
      <td> Area inspected, no cause and no baiting</td>
      <td>         5501 S WOODLAWN</td>
      <td>   NaN</td>
      <td> 1185160.809228</td>
      <td> 1868767.031107</td>
      <td>  5</td>
      <td> 21</td>
      <td> 41</td>
      <td> 41.795048</td>
      <td>-87.596544</td>
      <td>  (41.79504811489318, -87.59654363354196)</td>
    </tr>
<tr>
<th>135543</th>
      <td>        NaN</td>
      <td>          STATUS</td>
      <td>        NaN</td>
      <td> SERVICE REQUEST NUMBER</td>
      <td>      TYPE OF SERVICE REQUEST</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td> CURRENT ACTIVITY</td>
      <td>                      MOST RECENT ACTION</td>
      <td>          STREET ADDRESS</td>
      <td>   NaN</td>
      <td>            NaN</td>
      <td>            NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>       NaN</td>
      <td>       NaN</td>
      <td>                                      NaN</td>
    </tr>
</tbody>
</table>
<p>135544 rows × 20 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 특정 필드에 대해 값의 범위를 조사</span>
<span class="n">rats</span><span class="p">[</span><span class="s1">'Current Activity'</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[15]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>array([nan, 'Dispatch Crew', 'Request Sanitation Inspector',
       'CURRENT ACTIVITY'], dtype=object)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 데이터 필터링</span>
<span class="n">crew_dispatched</span> <span class="o">=</span> <span class="n">rats</span><span class="p">[</span><span class="n">rats</span><span class="p">[</span><span class="s1">'Current Activity'</span><span class="p">]</span> <span class="o">==</span> <span class="s1">'Dispatch Crew'</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">crew_dispatched</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[18]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>120739</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 시카고에서 쥐가 가장 많은 장소 10군데의 ZIP 코드</span>
<span class="n">crew_dispatched</span><span class="p">[</span><span class="s1">'ZIP Code'</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[24]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>60618    7930
60647    7498
60614    6114
60629    5324
60657    5169
60636    4324
60641    4030
60651    3528
60609    3448
60632    3420
60659    3253
60625    3182
60634    3147
60620    3139
60623    3121
...
60605    515
60656    507
60611    307
60654    229
60601     95
60606     87
60604     71
60602     66
60603     64
60661     59
60633     59
60827     22
60666      6
0          2
60635      1
Length: 61, dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dates</span> <span class="o">=</span> <span class="n">crew_dispatched</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">'Completion Date'</span><span class="p">)</span>
<span class="n">dates</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[27]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>&lt;pandas.core.groupby.DataFrameGroupBy object at 0x10555c710&gt;</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">len</span><span class="p">(</span><span class="n">dates</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[26]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>934</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [28]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 각 날짜에 대한 카운트 얻기</span>
<span class="n">date_counts</span> <span class="o">=</span> <span class="n">dates</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [29]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">date_counts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">10</span><span class="p">]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[29]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Completion Date
01/01/2014           7
01/02/2013          20
01/02/2014          96
01/03/2011           4
01/03/2012         125
01/03/2013          46
01/03/2014          59
01/04/2011          54
01/04/2012          38
01/04/2013         135
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [30]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 카운트 정렬</span>
<span class="n">date_counts</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">date_counts</span><span class="p">[</span><span class="o">-</span><span class="mi">10</span><span class="p">:]</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt output_prompt">Out[30]:</div>


<div class="output_text output_subarea output_execute_result">
<pre>Completion Date
10/26/2012         333
03/17/2011         336
12/09/2013         357
11/18/2013         362
11/13/2013         365
10/13/2011         378
10/14/2011         391
11/12/2013         401
10/07/2011         457
11/01/2013         488
dtype: int64</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>위의 자료를 보니 2013년 11월 1일에 쥐들이 가장 바빴다는 것을 알 수 있다.</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>Pandas의 기능을 여기서 모두 다루기에는 불가능할 정도로 이는 방대한 라이브러리</li>
<li>하지만 커다란 데이터세트를 분석하고, 데이터를 그룹으로 묶고, 통계를 내는 등의 작업을 하려 한다면 고려해볼 만하다.</li>
<li>
<a href="http://www.yes24.com/24/goods/11043328?scode=032&amp;OzSrank=1">Python for Data Analysis</a>에 더 많은 정보를 얻을 수 있으니 참고</li>
</ul>
</div>
</div>
</div>
    </div>
  </div>

        </div>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="../ch05-02/" rel="prev" title="ch05_02">Previous post</a>
            </li>
            <li class="next">
                <a href="../ch07/" rel="next" title="ch07">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="re4lfl0w",
            disqus_url="https://example.com/posts/books/python_cookbook/ch06/",
        disqus_title="ch06",
        disqus_identifier="cache/posts/books/python_cookbook/ch06.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
                    <footer id="footer"><p>Contents © 2016         <a href="mailto:n.tesla@example.com">Nikola Tesla</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../../../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
