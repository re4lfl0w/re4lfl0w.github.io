<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns#
article: http://ogp.me/ns/article#
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>ch12_01 | My Nikola Site</title>
<link href="../../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../../rss.xml">
<link rel="canonical" href="https://example.com/posts/books/python_cookbook/ch12-01/">
<!--[if lt IE 9]><script src="/assets/js/html5.js"></script><![endif]--><meta name="author" content="Nikola Tesla">
<meta property="og:site_name" content="My Nikola Site">
<meta property="og:title" content="ch12_01">
<meta property="og:url" content="https://example.com/posts/books/python_cookbook/ch12-01/">
<meta property="og:description" content="12. 병렬 처리¶
파이썬은 쓰레드 프로그래밍, 서브 프로세스 실행, 제너레이터 함수를 사용한 트릭 등 여러가지 병렬 프로그래밍 방식을 지원함
이번 장에서는 이런 병렬 프로그래밍 내용을 다루며, 일반적인 쓰레드 프로그래밍 기법과 병렬 처리 방식도 배움
숙련된 프로그래머라면, 병렬 프로그래밍에 수 많은 위험이 있다는 것을 잘 알고 있음
따라서 이번 장의 레시">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-06-15T19:51:40-09:00">
</head>
<body>
    <section class="social"><ul>
<li><a href="../../../../index.html" title="Home"><i class="icon-home"></i></a></li>
            <li><a href="../../../../archive.html" title="Archives"><i class="icon-folder-open-alt"></i></a></li>
            <li><a href="../../../../categories/index.html" title="Tags"><i class="icon-tags"></i></a></li>
            <li><a href="../../../../rss.xml" title="RSS"><i class="icon-rss"></i></a></li>
            <li><a href="https://getnikola.com" title="About me"><i class="icon-user"></i></a></li>
            <li><a href="https://twitter.com/getnikola" title="My Twitter"><i class="icon-twitter"></i></a></li>
            <li><a href="https://github.com/getnikola" title="My Github"><i class="icon-github"></i></a></li>

        </ul></section><section class="page-content"><div class="content" rel="main">
    <div class="post">
        <h1 class="p-name entry-title" itemprop="headline name">ch12_01</h1>

        <div class="meta">
            <div class="authordate">
                <time class="timeago" datetime="2016-06-15T19:51:40-09:00">2016-06-15 19:51</time>
            
                      |  
        <a href="index.ipynb" id="sourcelink">Source</a>

            </div>
            
        </div>
        <div class="body">
            <div tabindex="-1" id="notebook" class="border-box-sizing">
    <div class="container" id="notebook-container">

<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="12.-병렬-처리">12. 병렬 처리<a class="anchor-link" href="#12.-%EB%B3%91%EB%A0%AC-%EC%B2%98%EB%A6%AC">¶</a>
</h2>
<ul>
<li>파이썬은 <strong>쓰레드 프로그래밍, 서브 프로세스 실행, 제너레이터 함수를 사용한 트릭</strong> 등 여러가지 병렬 프로그래밍 방식을 지원함</li>
<li>이번 장에서는 이런 병렬 프로그래밍 내용을 다루며, 일반적인 쓰레드 프로그래밍 기법과 병렬 처리 방식도 배움</li>
<li>숙련된 프로그래머라면, 병렬 프로그래밍에 수 많은 위험이 있다는 것을 잘 알고 있음</li>
<li>따라서 이번 장의 레시피들은 좀 더 신뢰성 높고 디버깅 가능한 코드에 초점을 맞춤</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="12.1-쓰레드-시작과-정지">12.1 쓰레드 시작과 정지<a class="anchor-link" href="#12.1-%EC%93%B0%EB%A0%88%EB%93%9C-%EC%8B%9C%EC%9E%91%EA%B3%BC-%EC%A0%95%EC%A7%80">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>코드를 병렬적으로 실행하기 위해서 쓰레드를 만들거나 없애고 싶다</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>threading 라이브러리는 파이썬의 호출 가능한 것을 스스로 쓰레드에서 실행하도록 함</li>
<li>Thread 인스턴스를 만들고 실행하고 싶은 것을 넣으면 됨</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 개별 쓰레드에서 실행할 코드</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'T-minus'</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
        
<span class="kn">from</span> <span class="nn">threading</span> <span class="k">import</span> <span class="n">Thread</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,))</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 10
T-minus 9
T-minus 8
T-minus 7
T-minus 6
T-minus 5
T-minus 4
T-minus 3
T-minus 2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">if</span> <span class="n">t</span><span class="o">.</span><span class="n">is_alive</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Still running'</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Completed'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 1
Completed
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on method start in module threading:

start() method of threading.Thread instance
    Start the thread's activity.
    
    It must be called at most once per thread object. It arranges for the
    object's run() method to be invoked in a separate thread of control.
    
    This method will raise a RuntimeError if called more than once on the
    same thread object.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Help on method join in module threading:

join(timeout=None) method of threading.Thread instance
    Wait until the thread terminates.
    
    This blocks the calling thread until the thread whose join() method is
    called terminates -- either normally or through an unhandled exception
    or until the optional timeout occurs.
    
    When the timeout argument is present and not None, it should be a
    floating point number specifying a timeout for the operation in seconds
    (or fractions thereof). As join() always returns None, you must call
    isAlive() after join() to decide whether a timeout happened -- if the
    thread is still alive, the join() call timed out.
    
    When the timeout argument is not present or None, the operation will
    block until the thread terminates.
    
    A thread can be join()ed many times.
    
    join() raises a RuntimeError if an attempt is made to join the current
    thread as that would cause a deadlock. It is also an error to join() a
    thread before it has been started and attempts to do so raises the same
    exception.

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>스레드에 조인(join) 하도록 요청을 보낼 수도 있으며, 종료할 때까지 기다림</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</pre></div>
<ul>
<li>인터프리터는 스레드가 종료될 때까지 실행 상태로 남음</li>
<li>오랫동안 실행되는 스레드나 백그라운드에서 영원히 실행하는 스레드는 데몬으로 만드는 것을 고려해 보자</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,),</span> <span class="n">daemon</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
<ul>
<li>데몬 스레드는 조인 불가</li>
<li>하지만 메인 스레드가 종료될 때 자동으로 사라진다는 특징</li>
</ul>
<ul>
<li>앞에 나온 2가지 동작 외에 스레드를 가지고 할 수 있는 일이 많지 않음</li>
<li>예를 들어 스레드를 종료하도록 지시하거나, 스레드에 신호를 보내거나 스케쥴링하는 등 상위 레벨 동작이 불가능함</li>
<li>이런 기능이 필요하다면 독자 스스로 만들어 써야 함</li>
<li>스레드를 종료하고 싶다면, 스레드가 선택한 지점에서 폴(poll) 하도록 프로그래밍해야 함</li>
<li>예를 들어 다음과 같은 클래스에 스레드를 넣을 수 있음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">CountdownTask</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">True</span>
        
    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="kc">False</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="ow">and</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'T-minus'</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
            
<span class="n">c</span> <span class="o">=</span> <span class="n">CountdownTask</span><span class="p">()</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,))</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 10
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'About to terminate'</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span> <span class="c1"># 종료 지시</span>
<span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span> <span class="c1"># 실제 종료까지 기다림(필요한 경우)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Terminated'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 9
T-minus 8
T-minus 7
T-minus 6
About to terminate
Terminated
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>스레드 종료에 대한 폴링은 입출력과 같은 실행이 멈추는 작업과 관련 있는 경우에 매우 복잡해짐</li>
<li>예를 들어 스레드가 입출력 동작에 영원히 멈춰있는 경우에는 종료 여부를 확인하기 위해 반환될 수 없음</li>
<li>이 이슈를 해결하기 위해서 스레드에 조심스럽게 타임아웃 루프를 넣어야 함</li>
</ul>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">IOTask</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">terminate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_running</span> <span class="o">=</span> <span class="bp">False</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sock</span><span class="p">):</span>
        <span class="c1"># sock은 소켓이다</span>
        <span class="n">sock</span><span class="o">.</span><span class="n">settimeout</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># 타임아웃 시간 설정</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">_running</span><span class="p">:</span>
            <span class="c1"># 실행이 멈추는 입출력을 타임아웃과 함께 수행</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">sock</span><span class="o">.</span><span class="n">recv</span><span class="p">(</span><span class="mi">8192</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="n">socket</span><span class="o">.</span><span class="n">timeout</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># 계속 된 처리</span>
            <span class="o">...</span>
        <span class="c1"># 종료</span>
        <span class="k">return</span>
</pre></div>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>전역 인터프리터 락(global interpreter lock, GIL)으로 인해, 파이썬은 인터프리터에서 동시에 하나의 스레드만 실행할 수 있음</li>
<li>이로 인해 파이썬 스레드는 여러 CPU에 병렬적으로 동작하는 복잡한 작업에는 사용하지 않는 것이 좋음</li>
<li>이보다는 입출력 처리와 실행이 멈추는 작업(입출력 기다리기, 데이터베이스 결과 기다리기 등)을 수행하는 코드에서 병렬적 실행을 처리하는 것이 더 알맞음</li>
<li>Thread 클래스를 상속 받아 스레드를 정의할 때가 있음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [46]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="k">import</span> <span class="n">Thread</span>

<span class="k">class</span> <span class="nc">CountdownThread</span><span class="p">(</span><span class="n">Thread</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">while</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">'T-minus'</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
            
<span class="n">c</span> <span class="o">=</span> <span class="n">CountdownThread</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">c</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 5
T-minus 4
T-minus 3
T-minus 2
T-minus 1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이렇게 해도 동작하기는 하지만, 코드와 threading 라이브러리 사이에 <strong>불필요한 의존성</strong>이 생김</li>
<li>즉, 앞에 나온 기술을 사용하면 threading에 대한 아무런 의존성이 없지만, Threading 클래스를 상속 받으면 스레드 콘택스트의 결과 코드만 사용 가능</li>
<li>이런 의존성에서 자유로워지면 다른 콘택스트에서도 좀 더 유용하게 사용 가능</li>
<li>예를 들어, 다음과 같이 multiprocessing 모듈을 사용해서 작성한 코드를 별도의 프로세스에서 실행 가능</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [49]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">multiprocessing</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">CountdownTask</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">multiprocessing</span><span class="o">.</span><span class="n">Process</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">run</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,))</span>
<span class="n">p</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [52]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>1
T-minus 6
T-minus 5
T-minus 4
T-minus 3
T-minus 2
T-minus 1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>다시 한 번 말하지만, 이 코드는 CountdownTask 클래스가 <strong>실제 병렬성</strong>(스레드, 프로세스 등)에 <strong>중립적으로 구현되어 있어야만 동작함</strong>
</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="12.2-스레드가-시작했는지-판단하기">12.2 스레드가 시작했는지 판단하기<a class="anchor-link" href="#12.2-%EC%8A%A4%EB%A0%88%EB%93%9C%EA%B0%80-%EC%8B%9C%EC%9E%91%ED%96%88%EB%8A%94%EC%A7%80-%ED%8C%90%EB%8B%A8%ED%95%98%EA%B8%B0">¶</a>
</h3>
<h4 id="문제">문제<a class="anchor-link" href="#%EB%AC%B8%EC%A0%9C">¶</a>
</h4>
<ul>
<li>스레드를 만들었는데, 실제로 실행을 시작했는지 확인하고 싶다</li>
</ul>
<h4 id="해결">해결<a class="anchor-link" href="#%ED%95%B4%EA%B2%B0">¶</a>
</h4>
<ul>
<li>스레드의 핵심 기능은 독립적, 비결정적으로 실행된다는 것</li>
<li>따라서 프로그램의 다른 스레드가 특정 스레드가 특정 지점에 도달했는지 알아야 하는 경우에 복잡한 동기화 문제가 생기기도 함</li>
<li>이 문제를 해결하려면 threading 라이브러리의 Event 객체를 사용함</li>
<li>Event 인스턴스는 스레드가 어떤 일이 발생할 때까지 기다리도록 하는 "붙어 있는" 플래그와 유사함</li>
<li>우선 이 이벤트는 0으로 설정함</li>
<li>만약 이벤트를 설정하지 않고 스레드가 이벤트를 기다리는 중이라면 설정할 때까지 실행을 멈춤(sleep 상태)</li>
<li>이벤트를 설정하는 스레드는 기다리고 있는 모든 스레드를 깨움</li>
<li>스레드에서 이미 설정된 이벤트를 기다리고 있다면, 단순히 이를 무시하고 실행을 계속함</li>
<li>다음은 Event를 사용해 스레드를 시작하는 코드 샘플</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [53]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">threading</span> <span class="k">import</span> <span class="n">Thread</span><span class="p">,</span> <span class="n">Event</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="c1"># 독립된 스레드에서 실행할 코드</span>
<span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">started_evt</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'countdown starting'</span><span class="p">)</span>
    <span class="n">started_evt</span><span class="o">.</span><span class="n">set</span><span class="p">()</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'T-minus'</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
    
<span class="c1"># 시작을 호출하는데 사용할 이벤트 객체를 생성</span>
<span class="n">started_evt</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>

<span class="c1"># 스레드를 실행하고 시작 이벤트에 전달</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Launching countdown'</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">started_evt</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># 스레드가 시작하기를 기다림</span>
<span class="n">started_evt</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'countdown is running'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Launching countdown
countdown starting
T-minus 10
countdown is running
T-minus 9
T-minus 8
T-minus 7
T-minus 6
T-minus 5
T-minus 4
T-minus 3
T-minus 2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [54]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>T-minus 1
1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [55]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 시작을 호출하는데 사용할 이벤트 객체를 생성</span>
<span class="n">started_evt</span> <span class="o">=</span> <span class="n">Event</span><span class="p">()</span>

<span class="c1"># 스레드를 실행하고 시작 이벤트에 전달</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'Launching countdown'</span><span class="p">)</span>
<span class="n">t</span> <span class="o">=</span> <span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">started_evt</span><span class="p">))</span>
<span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># 스레드가 시작하기를 기다림</span>
<span class="c1"># started_evt.wait()</span>
<span class="c1"># 그래도 running이 뒤에 나오네.</span>
<span class="c1"># t.start()가 더 빨라서 그런듯</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">'countdown is running'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Launching countdown
countdown starting
T-minus 10
countdown is running
T-minus 9
T-minus 8
T-minus 7
T-minus 6
T-minus 5
T-minus 4
T-minus 3
T-minus 2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>이 코드를 실행하면 항상 "countdown starting" 메시지 이후에 "countdown is running" 메시지가 출력 됨</li>
<li>이는 메인 스레드가 시작 메시지를 출력하는 countdown() 함수를 기다리도록 하는 이벤트 때문에 나타난 현상</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h4 id="토론">토론<a class="anchor-link" href="#%ED%86%A0%EB%A1%A0">¶</a>
</h4>
<ul>
<li>Event 객체는 일회성 이벤트에 어울림</li>
<li>즉, 우리는 이벤트를 만들고, 스레드는 이벤트가 설정되기를 기다리고, 설정을 마치고 나면 Event를 버림</li>
<li>물론 clear() 메소드로 이벤트를 제거할 수도 있지만, 안전하게 이벤트를 제거하고 다시 설정되기를 기다리는 것은 쉽지 않으며, 이벤트 분실, 데드락 등의 문제가 발생하는 원인(실제로, 이벤트를 설정한 후에 제거하라는 요청이, 해제된 스레드가 다시 이벤트를 기다리기 시작하기 전에 수행되리라고 보장할 수 없음)</li>
<li>만약 스레드가 이벤트를 지속적으로 발생시킬 예정이라면 Condition 객체 사용을 고려해 보자</li>
<li>예를 들어 다음 코드는 다른 스레드의 타이머가 만료되지 않았는지 지속적으로 확인하는 예제</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [57]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s1">'clear'</span><span class="p">)</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>ok
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [58]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">PeriodicTimer</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">interval</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_interval</span> <span class="o">=</span> <span class="n">interval</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Condition</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">daemon</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
        
    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        타이머를 실행하고 구간마다 기다리는 스레드에게 알림</span>
<span class="sd">        '''</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_interval</span><span class="p">)</span>
            <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span> <span class="o">^=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="o">.</span><span class="n">notify_all</span><span class="p">()</span>
                
    <span class="k">def</span> <span class="nf">wait_for_tick</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        타이머의 다음 틱을 기다림</span>
<span class="sd">        '''</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="p">:</span>
            <span class="n">last_flag</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span>
            <span class="k">while</span> <span class="n">last_flag</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flag</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_cv</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                
<span class="c1"># 타이머 사용 예제</span>
<span class="n">ptimer</span> <span class="o">=</span> <span class="n">PeriodicTimer</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ptimer</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># 타이머에 싱크하는 두 스레드</span>
<span class="k">def</span> <span class="nf">countdown</span><span class="p">(</span><span class="n">nticks</span><span class="p">):</span>
    <span class="k">while</span> <span class="n">nticks</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ptimer</span><span class="o">.</span><span class="n">wait_for_tick</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'T-minus'</span><span class="p">,</span> <span class="n">nticks</span><span class="p">)</span>
        <span class="n">nticks</span> <span class="o">-=</span> <span class="mi">1</span>
        
<span class="k">def</span> <span class="nf">countup</span><span class="p">(</span><span class="n">last</span><span class="p">):</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">while</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="n">last</span><span class="p">:</span>
        <span class="n">ptimer</span><span class="o">.</span><span class="n">wait_for_tick</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">'Counting'</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        
<span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countdown</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">countup</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,))</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Counting 0
T-minus 10
Counting 1
T-minus 9
T-minus 8
Counting 2
T-minus 7
Counting 3
Counting 4
T-minus 6
T-minus 5
T-minus 4
T-minus 3
T-minus 2
T-minus 1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [82]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># xor 테스트</span>
<span class="n">b</span> <span class="o">=</span> <span class="mb">0b101</span>
<span class="n">b</span> <span class="o">^=</span> <span class="mb">0b1</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="n">b</span> <span class="o">^=</span> <span class="mb">0b1</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
<span class="n">b</span> <span class="o">^=</span> <span class="mb">0b1</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">bin</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>0b100
0b101
0b100
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Event 객체의 핵심 기능은 기다리고 있는 모든 스레드를 깨운다는 점</li>
<li>만약 기다리는 스레드중 하나만 깨우는 프로그램을 만들고 싶다면 Semaphore나 Condition 객체를 사용하는 것이 더 좋음</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [84]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># 워커 스레드</span>
<span class="k">def</span> <span class="nf">worker</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">sema</span><span class="p">):</span>
    <span class="c1"># 호출을 기다림</span>
    <span class="n">sema</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
    <span class="c1"># 메시지 출력</span>
    <span class="nb">print</span><span class="p">(</span><span class="s1">'Working'</span><span class="p">,</span> <span class="n">n</span><span class="p">)</span>
    
<span class="c1"># 스레드 생성</span>
<span class="n">sema</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Semaphore</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">nworkers</span> <span class="o">=</span> <span class="mi">10</span>
<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nworkers</span><span class="p">):</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">worker</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">sema</span><span class="p">,))</span>
    <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>앞에 나온 코드를 실행하면 스레드 풀이 시작되지만, 모두 세마포어(semaphore)를 획득하려고 진행이 막혀 있어서 아무 일도 일어나지 않음</li>
<li>세마포어가 해제될 때마다 하나의 워커만 깨어나서 실행됨</li>
</ul>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [85]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sema</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Working 0
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [86]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sema</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Working 1
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [87]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sema</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</pre></div>

</div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">
<div class="prompt"></div>
<div class="output_subarea output_stream output_stdout output_text">
<pre>Working 2
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>스레드 간 동기화가 관련된 복잡한 코드를 작성하다 보면 머리가 터지도록 아플 것</li>
<li>이보다는 queue나 actor를 사용해서 스레드끼리 통신하도록 만들어 주는 것이 조금 더 상식적인 접근법</li>
<li>큐는 바로 다음 레시피에, 액터는 레시피 12.10에서 자세히 설명함</li>
</ul>
<h5 id="아..-병렬성이래서-재밌을-줄-알았더니-재미없네.-차라리-파이콘2014에서-발표한-동시성-세션이-더-재밌다.-11장-먼저-하고-넘어와야겠다.">아.. 병렬성이래서 재밌을 줄 알았더니 재미없네. 차라리 파이콘2014에서 발표한 동시성 세션이 더 재밌다. 11장 먼저 하고 넘어와야겠다.<a class="anchor-link" href="#%EC%95%84..-%EB%B3%91%EB%A0%AC%EC%84%B1%EC%9D%B4%EB%9E%98%EC%84%9C-%EC%9E%AC%EB%B0%8C%EC%9D%84-%EC%A4%84-%EC%95%8C%EC%95%98%EB%8D%94%EB%8B%88-%EC%9E%AC%EB%AF%B8%EC%97%86%EB%84%A4.-%EC%B0%A8%EB%9D%BC%EB%A6%AC-%ED%8C%8C%EC%9D%B4%EC%BD%982014%EC%97%90%EC%84%9C-%EB%B0%9C%ED%91%9C%ED%95%9C-%EB%8F%99%EC%8B%9C%EC%84%B1-%EC%84%B8%EC%85%98%EC%9D%B4-%EB%8D%94-%EC%9E%AC%EB%B0%8C%EB%8B%A4.-11%EC%9E%A5-%EB%A8%BC%EC%A0%80-%ED%95%98%EA%B3%A0-%EB%84%98%EC%96%B4%EC%99%80%EC%95%BC%EA%B2%A0%EB%8B%A4.">¶</a>
</h5>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [ ]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

</div>
</div>
</div>

</div>
    </div>
  </div>

        </div>
                <ul class="pager hidden-print">
<li class="previous">
                <a href="../ch11-01/" rel="prev" title="ch11_01">Previous post</a>
            </li>
            <li class="next">
                <a href="../ch13/" rel="next" title="ch13">Next post</a>
            </li>
        </ul>
<div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="re4lfl0w",
            disqus_url="https://example.com/posts/books/python_cookbook/ch12-01/",
        disqus_title="ch12_01",
        disqus_identifier="cache/posts/books/python_cookbook/ch12_01.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


    </div>
                    <footer id="footer"><p>Contents © 2016         <a href="mailto:n.tesla@example.com">Nikola Tesla</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    </section><script src="../../../../assets/js/all-nocdn.js" type="text/javascript"></script><script type="text/javascript">
            $(function(){
                $('.timeago').timeago();
            });
        </script>
</body>
</html>
